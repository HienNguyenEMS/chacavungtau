<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Äá»“ng NhÃ¢n Food - BÃ¡nh MÃ¬ & Thá»±c Pháº©m Sáº¡ch</title>
    
    <meta name="description" content="Äá»“ng NhÃ¢n Food chuyÃªn cung cáº¥p bÃ¡nh mÃ¬ cháº£ cÃ¡ nÃ³ng, cháº£ cÃ¡ tÆ°Æ¡i VÅ©ng TÃ u, combo tiá»‡n lá»£i. Cam káº¿t nguyÃªn liá»‡u sáº¡ch, an toÃ n vá»‡ sinh. Äáº·t hÃ ng online, giao táº­n nÆ¡i.">
    
    <meta property="og:title" content="Äá»“ng NhÃ¢n Food - BÃ¡nh MÃ¬ & Thá»±c Pháº©m Sáº¡ch">
    <meta property="og:description" content="ThÆ°á»Ÿng thá»©c bÃ¡nh mÃ¬ cháº£ cÃ¡ nÃ³ng giÃ²n, cháº£ cÃ¡ tÆ°Æ¡i ngon vÃ  cÃ¡c sáº£n pháº©m sáº¡ch tá»« Äá»“ng NhÃ¢n Food. Äáº·t hÃ ng ngay hÃ´m nay!">
    <meta property="og:image" content="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/thumbnail-share.jpg">
    <meta property="og:url" content="https://chacavungtau.shop/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Äá»“ng NhÃ¢n Food - BÃ¡nh MÃ¬ & Thá»±c Pháº©m Sáº¡ch">
    <meta name="twitter:description" content="ThÆ°á»Ÿng thá»©c bÃ¡nh mÃ¬ cháº£ cÃ¡ nÃ³ng giÃ²n, cháº£ cÃ¡ tÆ°Æ¡i ngon vÃ  cÃ¡c sáº£n pháº©m sáº¡ch tá»« Äá»“ng NhÃ¢n Food. Äáº·t hÃ ng ngay hÃ´m nay!">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/thumbnail-share.jpg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #047857 0%, #064e3b 100%); }
        .card-shadow { box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        
        .interactive-card { 
            transition: all 0.3s ease-in-out; 
            border: 1px solid #e5e7eb;
        }
        .interactive-card:hover { 
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 20px rgba(16, 185, 129, 0.2); 
            border-color: #065f46;
        }

        .info-card {
            transition: all 0.3s ease-in-out;
            border: 1px solid #e5e7eb;
        }
        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(16, 185, 129, 0.2); 
            border-color: #065f46;
        }
        
        .dropdown { position: relative; }
        .dropdown-menu { position: absolute; top: 100%; right: 0; background: white; border-radius: 8px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); min-width: 200px; z-index: 50; transform: translateY(10px) scale(0.95); opacity: 0; visibility: hidden; transition: all 0.2s ease; }
        .dropdown-menu.show { transform: translateY(0) scale(1); opacity: 1; visibility: visible; }
        .mobile-nav-btn.active { color: #059669; background-color: #f0fdf4; }
        .dashboard-menu-item { display: flex; align-items: center; padding: 0.75rem 1rem; border-radius: 0.5rem; font-weight: 500; color: #4b5563; transition: all 0.2s ease-in-out; }
        .dashboard-menu-item:hover { background-color: #f3f4f6; }
        .dashboard-menu-item.active { background-color: #d1fae5; color: #047857; font-weight: 600; }
        .category-btn.active { background-color: #059669; color: white; border-color: #059669; }
        .payment-radio:checked + label { border-color: #059669; background-color: #f0fdf4; box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.5); }
        .rating-stars span { cursor: pointer; font-size: 2.5rem; color: #d1d5db; transition: color 0.2s; }
        
        .scroll-animate {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .scroll-animate.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        @media (max-width: 768px) { main { padding-bottom: 80px; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        main > section { padding-top: 1.5rem; padding-bottom: 1.5rem; }
    </style>
</head>
<body class="bg-gray-50">
    <header class="gradient-bg text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between gap-x-2">
                <div class="flex items-center space-x-3 cursor-pointer flex-shrink-0" onclick="showSection('intro')">
                    <img src="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/logo.jpg" alt="Logo" class="w-10 h-10 rounded-lg">
                    <div><h1 class="text-lg md:text-xl font-bold">Äá»“ng NhÃ¢n Food</h1></div>
                </div>
                <div class="relative flex-grow md:hidden ml-2">
                    <input type="text" placeholder="TÃ¬m kiáº¿m..." class="w-full bg-white bg-opacity-20 rounded-lg pl-4 pr-10 py-2 text-sm placeholder-emerald-100 focus:outline-none focus:bg-opacity-30 transition-all duration-300">
                    <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-emerald-100" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <div class="relative flex-grow max-w-xl hidden md:block">
                    <input type="text" placeholder="TÃ¬m kiáº¿m sáº£n pháº©m..." class="w-full bg-white bg-opacity-20 rounded-full px-5 py-2 text-sm placeholder-emerald-100 focus:outline-none focus:bg-opacity-30 transition-all duration-300">
                    <svg class="absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-emerald-100" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <div class="flex items-center flex-shrink-0">
                    <nav class="hidden md:flex space-x-5 items-center">
                        <button onclick="showSection('intro')" class="hover:text-amber-300 transition-colors">Trang chá»§</button>
                        <button onclick="showSection('menu')" class="hover:text-amber-300 transition-colors">Sáº£n pháº©m</button>
                        <button onclick="showSection('stores')" class="hover:text-amber-300 transition-colors">Cá»­a hÃ ng</button>
                        <button id="navCart" onclick="showSection('cart')" class="hover:text-amber-300 transition-colors relative hidden">Giá» hÃ ng <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span></button>
                    </nav>
                    <div id="userMenuContainer" class="relative ml-4">
                        <div id="notLoggedIn" class="flex space-x-3">
                            <button onclick="showSection('login')" class="bg-white bg-opacity-20 px-3 py-1.5 rounded-lg hover:bg-opacity-30 hidden md:block transition-transform hover:scale-105">ÄÄƒng nháº­p</button>
                            <button onclick="showSection('register')" class="bg-amber-400 text-slate-800 px-3 py-1.5 rounded-lg hover:bg-amber-300 font-semibold hidden md:block transition-transform hover:scale-105">ÄÄƒng kÃ½</button>
                        </div>
                        <div id="loggedIn" class="hidden">
                            <div class="dropdown">
                                <button onclick="toggleUserDropdown()" class="flex items-center space-x-2 bg-white bg-opacity-20 px-3 py-1.5 rounded-lg hover:bg-opacity-30"><span class="text-xl">ğŸ‘¤</span><span id="userName" class="font-medium hidden md:inline"></span><svg class="w-4 h-4 transition-transform hidden md:inline" id="userDropdownIcon" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button>
                                <div id="userDropdownMenu" class="dropdown-menu"><button onclick="showSection('dashboard'); closeUserDropdown();" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-emerald-50 flex items-center space-x-2"><span>ğŸ“Š</span><span>Dashboard</span></button><hr class="my-1"><button onclick="logout(); closeUserDropdown();" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 flex items-center space-x-2"><span>ğŸšª</span><span>ÄÄƒng xuáº¥t</span></button></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <div id="announcementBar" class="bg-yellow-100 text-red-600 text-base font-bold text-center py-2 px-4"><p id="announcementText"></p></div>
    
    <div class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t z-40">
        <div id="mobileNavGrid" class="grid grid-cols-3 h-16">
            <button onclick="showSection('intro')" class="mobile-nav-btn flex flex-col items-center justify-center space-y-1 text-gray-600" data-section="intro"><span class="text-xl">ğŸ </span><span class="text-xs font-medium">Trang chá»§</span></button>
            <button onclick="showSection('menu')" class="mobile-nav-btn flex flex-col items-center justify-center space-y-1 text-gray-600 active" data-section="menu"><span class="text-xl">ğŸ¥–</span><span class="text-xs font-medium">Sáº£n pháº©m</span></button>
            <button id="mobileNavCart" onclick="showSection('cart')" class="mobile-nav-btn flex-col items-center justify-center space-y-1 text-gray-600 relative hidden" data-section="cart"><span class="text-xl">ğŸ›’</span><span class="text-xs font-medium">Giá» hÃ ng</span><span id="mobileCartCount" class="absolute top-1 right-4 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span></button>
            <button onclick="isLoggedIn ? showSection('dashboard') : showSection('login')" class="mobile-nav-btn flex flex-col items-center justify-center space-y-1 text-gray-600" data-section="account"><span class="text-xl">ğŸ‘¤</span><span class="text-xs font-medium">TÃ i khoáº£n</span></button>
        </div>
    </div>

    <main class="container mx-auto px-2 sm:px-4 pt-2 pb-6">
        <section id="introSection" class="animate-fade-in"></section>
        <section id="menuSection" class="hidden animate-fade-in"></section>
        <section id="storesSection" class="hidden animate-fade-in"></section>
        <section id="cartSection" class="hidden animate-fade-in"></section>
        <section id="loginSection" class="hidden animate-fade-in"></section>
        <section id="registerSection" class="hidden animate-fade-in"></section>
        <section id="dashboardSection" class="hidden animate-fade-in"></section>
    </main>
    
    <footer class="bg-emerald-800 text-white pt-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-5">
                <div>
                    <div class="flex items-center space-x-2 mb-3"><img src="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/logo.jpg" alt="Logo" class="w-10 h-10 rounded-lg"><span class="font-bold text-lg">Äá»“ng NhÃ¢n Food</span></div>
                    <p class="text-emerald-200 text-sm">Mang nhá»¯ng sáº£n pháº©m cháº¥t lÆ°á»£ng, an toÃ n vÃ  tiá»‡n lá»£i Ä‘áº¿n má»i nhÃ .</p>
                </div>
                <div>
                    <h3 class="font-bold mb-3">LiÃªn há»‡</h3>
                    <ul class="space-y-1.5 text-emerald-200 text-sm">
                        <li><strong>Hotline:</strong> 0934945967</li>
                        <li><strong>Email:</strong> Nguyenchithanh20081989@gmail.com</li>
                        <li><strong>Trá»¥ sá»Ÿ:</strong> 3/564 áº¤p 64, XuÃ¢n Thá»›i SÆ¡n, TPHCM</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold mb-3">Káº¿t ná»‘i vá»›i chÃºng tÃ´i</h3>
                     <div class="flex space-x-4">
                        <a href="https://www.facebook.com/share/15xupWfZQz/" target="_blank" rel="noopener noreferrer" class="text-emerald-200 hover:text-white" title="Facebook"><img src="https://upload.wikimedia.org/wikipedia/commons/0/05/Facebook_Logo_%282019%29.png" alt="Facebook" class="w-6 h-6"></a>
                        <a href="https://www.tiktok.com/@ch.c.vng.tung.nhn?_t=ZS-8zLJLzE0RRV&_r=1" target="_blank" rel="noopener noreferrer" class="text-emerald-200 hover:text-white" title="Tiktok"><img src="https://cdn4.iconfinder.com/data/icons/social-media-flat-7/64/Social-media_Tiktok-512.png" alt="Tiktok" class="w-6 h-6"></a>
                        <a href="https://www.youtube.com/@NguyenChi-md4gs" target="_blank" rel="noopener noreferrer" class="text-emerald-200 hover:text-white" title="Youtube"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/YouTube_full-color_icon_%282017%29.svg/256px-YouTube_full-color_icon_%282017%29.svg.png" alt="Youtube" class="w-6 h-6"></a>
                        <a href="https://zalo.me/3635285758582238200" target="_blank" rel="noopener noreferrer" class="text-emerald-200 hover:text-white" title="Zalo OA"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Icon_of_Zalo.svg/2048px-Icon_of_Zalo.svg.png" alt="Zalo" class="w-6 h-6"></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-emerald-700 py-4 text-center text-sm text-emerald-400"><p>&copy; 2025 Äá»“ng NhÃ¢n Food | All Rights Reserved | <a href="#" class="hover:text-white">HÆ°á»›ng dáº«n sá»­ dá»¥ng</a> | <a href="#" class="hover:text-white">TuyÃªn bá»‘ quyá»n riÃªng tÆ°</a></p></div>
        </div>
    </footer>


    <div id="bankingPaymentModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"></div>
    <div id="debtWarningModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"></div>
    <div id="ratingModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"></div>
    <div id="orderDetailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"></div>

    <div class="fixed bottom-20 right-5 z-40 flex flex-col space-y-3">
        <a href="https://zalo.me/0934945967" target="_blank" rel="noopener noreferrer" class="w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-transform transform hover:scale-110" title="Chat Zalo"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Icon_of_Zalo.svg/2048px-Icon_of_Zalo.svg.png" alt="Zalo" class="w-12 h-12"></a>
        <a href="tel:+84934945967" class="w-14 h-14 bg-green-500 rounded-full flex items-center justify-center shadow-lg hover:bg-green-600 transition-transform transform hover:scale-110" title="Gá»i Hotline"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></a>
    </div>
</body>

<script>
const announcements=[ "ğŸ‰ Äang ká»³ nghá»‰ lá»… Quá»‘c khÃ¡nh, cÃ¡c Ä‘Æ¡n hÃ ng Ä‘áº·t tá»« 31/08 Ä‘áº¿n 02/09 sáº½ Ä‘Æ°á»£c giao tá»« 03-05/09/2025, mong khÃ¡ch hÃ ng thÃ´ng cáº£m.", "ğŸ’° Má»i cÃ¡c báº¡n cáº­p nháº­t chÃ­nh sÃ¡ch hoa há»“ng Ä‘áº¡i lÃ½ theo sáº£n lÆ°á»£ng Ä‘áº·t hÃ ng - LiÃªn há»‡ ngay Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t!", "ğŸšš Miá»…n phÃ­ giao hÃ ng cho Ä‘Æ¡n hÃ ng tá»« 200.000Ä‘ trong ná»™i thÃ nh TP.HCM", "â­ Khuyáº¿n mÃ£i Ä‘áº·c biá»‡t: Giáº£m 15% cho khÃ¡ch hÃ ng má»›i khi Ä‘áº·t hÃ ng láº§n Ä‘áº§u" ];
let currentAnnouncementIndex=0;
function showAnnouncement(){const e=document.getElementById("announcementBar"),t=document.getElementById("announcementText");announcements.length>0?(t.textContent=announcements[currentAnnouncementIndex],e.classList.remove("hidden"),currentAnnouncementIndex=(currentAnnouncementIndex+1)%announcements.length):e.classList.add("hidden")}
function initAnnouncements(){showAnnouncement(),setInterval(showAnnouncement,8e3)}
let cart=[],currentUser=null,isLoggedIn=!1,currentCategory="all",postLoginAction=null,currentSort="best-selling";
const SHIPPING_FEE=15e3;

let demoUsers=[{id:1,name:"Nguyá»…n VÄƒn A",email:"demo@example.com",phone:"0901234567",password:"123456",debt:15e4,creditLimit:2e5,address:"123 ÄÆ°á»ng ABC, PhÆ°á»ng 1, TP VÅ©ng TÃ u", dob: "1990-01-15"},{id:2,name:"Tráº§n Thá»‹ B",email:"b@example.com",phone:"0987654321",password:"123456",debt:19e4,creditLimit:2e5,address:"456 ÄÆ°á»ng XYZ, PhÆ°á»ng 2, TP VÅ©ng TÃ u", dob: null}];

let orderHistory=[{id:1,code:"DH12345",status:"Äang xá»­ lÃ½",total:153e3,date:new Date("2025-08-26"),customerId:1,shipper:null,rating:null,items:[{name:"Cháº£ cÃ¡ tÆ°Æ¡i (kg)",quantity:1,price:12e4},{name:"BÃ¡nh mÃ¬ cháº£ cÃ¡ nÃ³ng",quantity:1,price:18e3}]},{id:2,code:"DH12346",status:"HoÃ n thÃ nh",total:175e3,date:new Date("2025-08-25"),customerId:1,shipper:"Nguyá»…n VÄƒn Giao",rating:null,items:[{name:"Cháº£ cÃ¡ Nha Trang (kg)",quantity:1,price:135e3},{name:"BÃ¡nh mÃ¬ nem nÆ°á»›ng",quantity:1,price:25e3}]}];
const demoCompletedOrder={id:999,code:"DH-DEMO",status:"HoÃ n thÃ nh",total:101e3,date:new Date("2025-08-24 08:15:00"),customerId:null,shipper:"Tráº§n Thá»‹ Váº­n",completed_by:"Tráº§n Thá»‹ Váº­n",bill_image_url:"https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/bill-demo.jpg",rating:null,items:[{name:"XÃ´i cháº£ cÃ¡ Ä‘áº·c biá»‡t",quantity:2,price:25e3},{name:"BÃ¡nh mÃ¬ cháº£ cÃ¡ nÃ³ng",quantity:2,price:18e3}],history_log:[{timestamp:new Date("2025-08-24 08:15:00"),status:"ÄÃ£ tiáº¿p nháº­n",actor:"Há»‡ thá»‘ng"},{timestamp:new Date("2025-08-24 08:20:00"),status:"Äang Ä‘Ã³ng gÃ³i",actor:"LÃª VÄƒn C"},{timestamp:new Date("2025-08-24 08:45:00"),status:"BÃ n giao váº­n chuyá»ƒn",actor:"LÃª VÄƒn C"},{timestamp:new Date("2025-08-24 09:10:00"),status:"HoÃ n thÃ nh",actor:"Tráº§n Thá»‹ Váº­n"}]};
const TEMPLATES={
    intro:`<div class="bg-emerald-600 text-white rounded-2xl p-6 md:p-8 mb-8 card-shadow"><div class="text-center relative z-10"><h1 class="text-3xl md:text-5xl font-bold mb-3 scroll-animate">BÃ¡nh MÃ¬ Ngon - Gáº¯n Káº¿t Cá»™ng Äá»“ng</h1><p class="text-md md:text-xl mb-5 text-emerald-100 scroll-animate">Sáº£n pháº©m cháº¥t lÆ°á»£ng tá»« Äá»“ng NhÃ¢n Food</p><div class="grid grid-cols-2 gap-3 mx-auto max-w-sm md:max-w-md scroll-animate"><a href="tel:+84934945967" class="flex items-center justify-center space-x-2 bg-rose-600 hover:bg-rose-700 text-white px-2 py-2.5 rounded-full transition-transform hover:scale-105 text-sm font-semibold"><span class="text-lg">ğŸ“</span><span>Hotline: 0934945967</span></a><button onclick="showSection('menu')" class="flex items-center justify-center space-x-2 bg-white text-emerald-600 px-2 py-2.5 rounded-full font-semibold hover:bg-emerald-50 transition-transform hover:scale-105 text-sm"><span>Xem sáº£n pháº©m</span></button></div></div></div><div class="bg-white rounded-lg card-shadow p-4 md:p-6 mb-8 scroll-animate"><h2 class="text-2xl font-bold text-center text-emerald-800 mb-6">Sáº£n Pháº©m Ná»•i Báº­t</h2><div id="featuredProductsGrid" class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6"></div><div class="text-center mt-6"><button onclick="showSection('menu')" class="bg-emerald-600 text-white px-6 py-2.5 rounded-full font-semibold hover:bg-emerald-700 transition-transform hover:scale-105">Xem Táº¥t Cáº£ Sáº£n Pháº©m</button></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 text-center scroll-animate"><div class="bg-white p-4 rounded-lg info-card"><div class="text-3xl mb-2">ğŸŒ¿</div><h3 class="text-lg font-bold mb-1">NguyÃªn Liá»‡u Sáº¡ch</h3><p class="text-gray-600 text-sm">Nguá»“n nguyÃªn liá»‡u Ä‘Æ°á»£c chá»n lá»c ká»¹ lÆ°á»¡ng.</p></div><div class="bg-white p-4 rounded-lg info-card"><div class="text-3xl mb-2">ğŸ›¡ï¸</div><h3 class="text-lg font-bold mb-1">An ToÃ n Vá»‡ Sinh</h3><p class="text-gray-600 text-sm">Quy trÃ¬nh sáº£n xuáº¥t Ä‘áº¡t chuáº©n an toÃ n.</p></div><div class="bg-white p-4 rounded-lg info-card"><div class="text-3xl mb-2">ğŸšš</div><h3 class="text-lg font-bold mb-1">Tiá»‡n Lá»£i & Nhanh ChÃ³ng</h3><p class="text-gray-600 text-sm">Há»‡ thá»‘ng phÃ¢n phá»‘i rá»™ng kháº¯p, giao nhanh.</p></div><div class="bg-white p-4 rounded-lg info-card"><div class="text-3xl mb-2">ğŸ¤</div><h3 class="text-lg font-bold mb-1">Há»— Trá»£ Khá»Ÿi Nghiá»‡p</h3><p class="text-gray-600 text-sm">Giáº£i phÃ¡p xe bÃ¡nh mÃ¬ chuyÃªn nghiá»‡p, giÃ¡ cáº¡nh tranh.</p></div></div><div class="bg-white rounded-lg card-shadow grid md:grid-cols-2 gap-6 items-center scroll-animate"><div class="p-5 md:p-8"><div><h2 class="text-2xl font-bold text-emerald-800 mb-4">Vá» Äá»“ng NhÃ¢n Food</h2><div class="text-gray-700 space-y-3"><p>Vá»›i kinh nghiá»‡m lÃ¢u nÄƒm, Äá»“ng NhÃ¢n Food tá»± hÃ o mang Ä‘áº¿n nhá»¯ng sáº£n pháº©m khÃ´ng chá»‰ ngon miá»‡ng mÃ  cÃ²n Ä‘áº£m báº£o an toÃ n tuyá»‡t Ä‘á»‘i cho sá»©c khá»e. ChÃºng tÃ´i chuyÃªn:</p><ul class="space-y-2 list-inside list-disc marker:text-emerald-500"><li>Cung cáº¥p Cháº£ CÃ¡ Sá»£i, Cháº£ CÃ¡ TÆ°Æ¡i, Cháº£ CÃ¡ Chá»£, Cháº£ CÃ¡ Nha Trang.</li><li>HÆ°á»›ng dáº«n khá»Ÿi nghiá»‡p mÃ´ hÃ¬nh kinh doanh bÃ¡nh mÃ¬ cháº£ cÃ¡.</li><li>Cung cáº¥p vÃ  cho thuÃª xe bÃ¡nh mÃ¬, há»— trá»£ Ä‘á»‘i tÃ¡c tá»‘i Ä‘a.</li></ul></div></div><div class="gradient-bg text-white rounded-lg p-6 text-center mt-6"><h2 class="text-2xl font-bold mb-3">Sáºµn sÃ ng thÆ°á»Ÿng thá»©c?</h2><button onclick="showSection('menu')" class="bg-white text-emerald-600 px-6 py-2.5 rounded-full font-semibold hover:bg-emerald-50 mt-2 transition-transform hover:scale-105">Äáº·t HÃ ng Ngay</button></div></div><div class="aspect-w-16 aspect-h-9 rounded-r-lg overflow-hidden h-full"><iframe class="w-full h-full" src="https://www.youtube.com/embed/5kSmizoku8s" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>`,
    menu:`<h2 class="text-2xl md:text-3xl font-bold text-emerald-800 mb-6 text-center scroll-animate">Sáº£n Pháº©m Cá»§a ChÃºng TÃ´i</h2><div class="flex flex-col sm:flex-row sm:flex-wrap sm:items-center sm:justify-between gap-4 mb-6 scroll-animate"><div id="category-filters" class="flex-grow flex flex-wrap justify-center sm:justify-start gap-2"><button onclick="filterProducts('all', this)" class="category-btn active px-3 py-1.5 text-sm">Táº¥t cáº£</button><button onclick="filterProducts('banhmi', this)" class="category-btn bg-white border px-3 py-1.5 text-sm">BÃ¡nh MÃ¬</button><button onclick="filterProducts('chaca', this)" class="category-btn bg-white border px-3 py-1.5 text-sm">Cháº£ CÃ¡</button><button onclick="filterProducts('combo', this)" class="category-btn bg-white border px-3 py-1.5 text-sm">Combo</button><button onclick="filterProducts('phukien', this)" class="category-btn bg-white border px-3 py-1.5 text-sm">Phá»¥ kiá»‡n</button></div><div class="flex-shrink-0 w-full sm:w-auto"><select id="sort-selector" onchange="handleSortChange(this)" class="w-full border rounded-md p-2 text-sm bg-white shadow-sm"><option value="best-selling">Sáº£n pháº©m bÃ¡n cháº¡y</option><option value="newest">Sáº£n pháº©m má»›i nháº¥t</option><option value="price-asc">GiÃ¡: Tháº¥p Ä‘áº¿n Cao</option><option value="price-desc">GiÃ¡: Cao Ä‘áº¿n Tháº¥p</option></select></div></div><div id="productGrid" class="grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 md:gap-4"></div>`,
    stores:`<h2 class="text-3xl font-bold text-emerald-800 mb-6 text-center">Há»‡ Thá»‘ng Cá»­a HÃ ng</h2><div id="storeGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-5"></div>`,
    cart:`<div class="max-w-7xl mx-auto"><h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Giá» HÃ ng & Thanh ToÃ¡n</h2><div id="cartContent"></div></div>`,
    login:`<div class="max-w-md mx-auto bg-white rounded-lg card-shadow p-6"><h2 class="text-3xl font-bold text-center mb-6">ÄÄƒng Nháº­p</h2><form id="loginForm"><div class="space-y-4"><input type="text" id="loginIdentifier" required placeholder="Email hoáº·c SÄT" class="w-full px-4 py-3 border rounded-lg"><input type="password" id="loginPassword" required placeholder="Máº­t kháº©u" class="w-full px-4 py-3 border rounded-lg"><button type="submit" class="w-full bg-emerald-600 text-white py-3 rounded-lg font-semibold transition-transform hover:scale-105">ÄÄƒng nháº­p</button></div></form><div id="loginMessage" class="mt-4 text-center text-sm"></div><p class="mt-5 text-center">ChÆ°a cÃ³ tÃ i khoáº£n? <button onclick="showSection('register')" class="text-emerald-600 font-medium">ÄÄƒng kÃ½</button></p></div>`,
    register:`<div class="max-w-md mx-auto bg-white rounded-lg card-shadow p-6"><h2 class="text-3xl font-bold text-center mb-6">ÄÄƒng KÃ½ TÃ i Khoáº£n</h2>
        <form id="registerForm" class="space-y-4">
            <div>
                <label for="registerName" class="font-medium text-gray-700 text-sm">Há» vÃ  tÃªn <span class="text-red-500">*</span></label>
                <input type="text" id="registerName" required placeholder="Nguyá»…n VÄƒn A" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <div>
                <label for="registerDob" class="font-medium text-gray-700 text-sm">NgÃ y sinh</label>
                <input type="date" id="registerDob" class="w-full mt-1 px-4 py-3 border rounded-lg text-gray-500">
                <p class="text-xs text-gray-500 mt-1">Nháº­p ngÃ y sinh Ä‘á»ƒ nháº­n mÃ£ giáº£m giÃ¡ Ä‘áº¿n 30% trong thÃ¡ng sinh nháº­t cá»§a báº¡n!</p>
            </div>
            <div>
                <label for="registerPhone" class="font-medium text-gray-700 text-sm">Sá»‘ Ä‘iá»‡n thoáº¡i <span class="text-red-500">*</span></label>
                <input type="tel" id="registerPhone" required placeholder="0901234567" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <div>
                <label for="registerAddress" class="font-medium text-gray-700 text-sm">Äá»‹a chá»‰ nháº­n hÃ ng <span class="text-red-500">*</span></label>
                <input type="text" id="registerAddress" required placeholder="Sá»‘ nhÃ /ÄÆ°á»ng, PhÆ°á»ng/XÃ£, Quáº­n/Huyá»‡n" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
             <div>
                <label for="registerEmail" class="font-medium text-gray-700 text-sm">Email (KhÃ´ng báº¯t buá»™c)</label>
                <input type="email" id="registerEmail" placeholder="email@example.com" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <div>
                <label for="registerPassword" class="font-medium text-gray-700 text-sm">Máº­t kháº©u <span class="text-red-500">*</span></label>
                <input type="password" id="registerPassword" required minlength="6" placeholder="Ãt nháº¥t 6 kÃ½ tá»±" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <button type="submit" class="w-full bg-emerald-600 text-white py-3 rounded-lg font-semibold transition-transform hover:scale-105 !mt-6">Táº¡o tÃ i khoáº£n</button>
        </form>
        <div id="registerMessage" class="mt-4 text-center text-sm"></div>
        <p class="mt-5 text-center">ÄÃ£ cÃ³ tÃ i khoáº£n? <button onclick="showSection('login')" class="text-emerald-600 font-medium">ÄÄƒng nháº­p</button></p>
    </div>`,
    dashboard:`<div class="flex flex-col md:flex-row gap-6"><div class="w-full md:w-64 flex-shrink-0"><div class="bg-white rounded-lg card-shadow p-4 space-y-2"><button onclick="showDashboardTab('overview', this)" class="dashboard-menu-item active w-full"><span>ğŸ“Š</span><span>Tá»•ng quan</span></button><button onclick="showDashboardTab('orders', this)" class="dashboard-menu-item w-full"><span>ğŸ“¦</span><span>ÄÆ¡n hÃ ng</span></button><button onclick="showDashboardTab('debt', this)" class="dashboard-menu-item w-full"><span>ğŸ’°</span><span>CÃ´ng ná»£</span></button><button onclick="showDashboardTab('profile', this)" class="dashboard-menu-item w-full"><span>ğŸ‘¤</span><span>TÃ i khoáº£n</span></button></div></div><div class="flex-1"><div id="overviewTab" class="dashboard-content"></div><div id="ordersTab" class="dashboard-content hidden"></div><div id="debtTab" class="dashboard-content hidden"></div><div id="profileTab" class="dashboard-content hidden"></div></div></div>`,
    bankingPaymentModal:`<div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-md w-full animate-fade-in"><h3 class="text-2xl font-bold text-center mb-4">Thanh toÃ¡n chuyá»ƒn khoáº£n</h3><p class="text-center text-gray-600 mb-6">Vui lÃ²ng quÃ©t mÃ£ QR Ä‘á»ƒ thanh toÃ¡n.</p><div class="flex justify-center mb-4"><img id="bankingQrImage" src="" alt="MÃ£ QR thanh toÃ¡n" class="w-64 h-64 border rounded-lg"></div><div class="bg-gray-50 rounded-lg p-4 text-center space-y-2"><p>Sá»‘ tiá»n: <strong id="bankingAmount" class="text-xl text-red-600"></strong></p><p>Ná»™i dung: <strong id="bankingContent" class="text-lg text-blue-600"></strong></p></div><div class="mt-6 flex justify-end space-x-3"><button onclick="closeModal('bankingPaymentModal')" class="px-6 py-2 bg-gray-200 rounded-lg">Há»§y</button><button onclick="confirmBankingPayment()" class="px-6 py-2 bg-emerald-600 text-white rounded-lg">TÃ´i Ä‘Ã£ thanh toÃ¡n</button></div></div>`,
    debtWarningModal:`<div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-lg w-full animate-fade-in"><h3 class="text-2xl font-bold text-center mb-4 text-red-700">âš ï¸ Cáº£nh bÃ¡o CÃ´ng Ná»£</h3><div id="debtWarningContent" class="text-center text-gray-700 mb-6 space-y-2"></div><p class="text-center text-gray-600 mb-4">Vui lÃ²ng thanh toÃ¡n cÃ´ng ná»£ Ä‘á»ƒ tiáº¿p tá»¥c.</p><div class="flex justify-center mb-4"><img id="debtQrImage" src="" alt="MÃ£ QR thanh toÃ¡n cÃ´ng ná»£" class="w-64 h-64 border rounded-lg"></div><div class="mt-6 flex justify-end space-x-3"><button onclick="closeModal('debtWarningModal')" class="px-6 py-2 bg-gray-200 rounded-lg">Äá»ƒ sau</button><button onclick="confirmDebtPayment()" class="px-6 py-2 bg-blue-600 text-white rounded-lg">TÃ´i Ä‘Ã£ thanh toÃ¡n</button></div></div>`,
    orderDetailModal:`<div class="bg-white rounded-lg shadow-xl p-4 sm:p-6 max-w-2xl w-full animate-fade-in max-h-[90vh] overflow-y-auto"><div class="flex justify-between items-start mb-4"><h3 class="text-xl sm:text-2xl font-bold">Chi tiáº¿t Ä‘Æ¡n hÃ ng <span id="detailOrderCode" class="text-emerald-600"></span></h3><button onclick="closeModal('orderDetailModal')" class="text-2xl text-gray-500 hover:text-gray-800">&times;</button></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3 text-sm text-gray-700 mb-4"><div class="flex justify-between"><strong>Tráº¡ng thÃ¡i:</strong> <span id="detailOrderStatus" class="font-semibold text-right"></span></div><div class="flex justify-between"><strong>NgÃ y Ä‘áº·t:</strong> <span id="detailOrderDate" class="text-right"></span></div><div class="flex justify-between"><strong>NgÆ°á»i nháº­n:</strong> <span id="detailOrderCustomer" class="text-right"></span></div><div class="flex justify-between"><strong>NgÆ°á»i giao:</strong> <span id="detailOrderShipper" class="text-right"></span></div><div class="flex justify-between col-span-1 sm:col-span-2 text-base"><strong>Tá»•ng tiá»n:</strong> <span id="detailOrderTotal" class="font-bold text-lg text-rose-600"></span></div></div><h4 class="font-semibold text-lg mb-2">Sáº£n pháº©m:</h4><div id="detailOrderItems" class="space-y-2 border-t border-b py-3 mb-4 text-sm"></div><div id="order-actions" class="mb-4"></div><h4 class="font-semibold text-lg mb-2">Lá»‹ch sá»­ Ä‘Æ¡n hÃ ng</h4><div id="orderHistoryLog" class="border-l-2 border-emerald-500 pl-4 space-y-4 text-sm"></div><div id="ratingSection" class="mt-6 border-t pt-4"></div></div>`
};
function isAddressValid(address){if(!address)return!1;const t=address.trim();return t.length>=10&&t.split(",").length>=3}
function showSection(e){const t=document.getElementById(e+"Section");document.querySelectorAll("main > section").forEach(e=>e.classList.add("hidden")),t&&(t.innerHTML=TEMPLATES[e]||"",t.classList.remove("hidden")),updateMobileNavigation(e),window.scrollTo(0,0),e.match(/login|register/)&&document.getElementById(`${e}Form`).addEventListener("submit","login"===e?handleLogin:handleRegister),"intro"===e&&loadFeaturedProducts(),"menu"===e&&filterProducts(currentCategory,document.querySelector(".category-btn.active")),"stores"===e&&loadStores(),"cart"===e&&updateCartDisplay(),"dashboard"===e&&loadDashboard(),setupScrollAnimations()}
function updateMobileNavigation(e){document.querySelectorAll(".mobile-nav-btn").forEach(t=>{const n=t.getAttribute("data-section");let o=n===e;"account"===n&&["login","register","dashboard"].includes(e)&&(o=!0),t.classList.toggle("active",o)})}
function updateMenuVisibility(){const e=cart.length>0;document.getElementById("navCart").classList.toggle("hidden",!e);const t=document.getElementById("mobileNavCart");t.classList.toggle("hidden",!e),t.classList.toggle("flex",e);const n=document.getElementById("mobileNavGrid"),o=3+(e?1:0);n.style.gridTemplateColumns=`repeat(${o}, 1fr)`}
function closeModal(e){const t=document.getElementById(e);t&&(t.innerHTML="",t.classList.add("hidden"))}
function loadFeaturedProducts(){const e=document.getElementById("featuredProductsGrid");e&&(e.innerHTML=products.slice(0,4).map(e=>renderProductCard(e)).join(""))}
function filterProducts(e,t){currentCategory=e,document.querySelectorAll("#category-filters .category-btn").forEach(e=>e.classList.remove("active")),t.classList.add("active"),loadProducts()}
function handleSortChange(e){currentSort=e.value,loadProducts()}
function loadProducts(){const e=document.getElementById("productGrid");if(!e)return;let t="all"===currentCategory?products.slice():products.filter(e=>e.category===currentCategory);switch(currentSort){case"best-selling":t.sort((e,t)=>t.sold-e.sold);break;case"price-asc":t.sort((e,t)=>(e.salePrice||e.price)-(t.salePrice||t.price));break;case"price-desc":t.sort((e,t)=>(t.salePrice||t.price)-(e.salePrice||e.price));break;case"newest":t.sort((e,t)=>t.id-e.id)}e.innerHTML=t.map(e=>renderProductCard(e)).join(""),document.getElementById("sort-selector")&&(document.getElementById("sort-selector").value=currentSort),setupScrollAnimations()}
function renderProductCard(e){const t=e.salePrice&&e.salePrice<e.price,n=t?e.salePrice:e.price,o=t?Math.round((e.price-n)/e.price*100):0;return`<div class="bg-white rounded-lg card-shadow overflow-hidden interactive-card flex flex-col scroll-animate"><div class="aspect-[16/9] w-full overflow-hidden relative">${t?`<div class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-md z-10">-${o}%</div>`:""}<img src="${e.image}" onerror="this.onerror=null;this.src='${DEMO_IMAGE_URL}';" alt="${e.name}" class="w-full h-full object-cover bg-gray-100"></div><div class="p-3 md:p-4 flex flex-col flex-grow"><h3 class="font-bold text-sm md:text-base mb-2 truncate" title="${e.name}">${e.name}</h3><div class="mt-auto space-y-2"><div class="flex items-center justify-between"><div><span class="font-semibold text-rose-600 text-base md:text-lg">${n.toLocaleString()}Ä‘</span>${t?`<span class="line-through text-gray-400 text-xs md:text-sm ml-1">${e.price.toLocaleString()}Ä‘</span>`:""}</div></div><div id="product-actions-${e.id}" class="w-full flex-shrink-0">${generateProductActions(e)}</div></div></div></div>`}
function generateProductActions(e){const t=cart.find(t=>t.id===e.id);return t?`<div class="flex flex-col space-y-1.5"><div class="flex items-center justify-end gap-1"><button onclick="updateCartQuantity(${e.id}, -0.5)" class="w-6 h-6 md:w-7 md:h-7 bg-gray-200 rounded-md font-bold text-lg flex-shrink-0">-</button><input type="number" value="${t.quantity}" step="0.5" onchange="updateCartQuantityFromInput(${e.id}, this.value)" class="w-10 h-7 md:w-12 md:h-8 text-center font-bold border-gray-300 border rounded-md"><button onclick="updateCartQuantity(${e.id}, 0.5)" class="w-6 h-6 md:w-7 md:h-7 bg-gray-200 rounded-md font-bold text-lg flex-shrink-0">+</button></div><button onclick="showSection('cart')" class="w-full bg-amber-500 text-white py-1 rounded-md text-xs font-semibold hover:bg-amber-600 transition-transform hover:scale-105">Thanh toÃ¡n</button></div>`:`<button onclick="addToCart(${e.id})" class="w-full text-white py-1.5 md:py-2 rounded-lg font-semibold bg-emerald-600 hover:bg-emerald-700 transition-colors text-sm transition-transform hover:scale-105">Mua ngay</button>`}
function updateProductCardActions(e){const t=document.getElementById(`product-actions-${e}`),n=products.find(t=>t.id===e);t&&(t.innerHTML=generateProductActions(n))}
function loadStores(){const e=document.getElementById("storeGrid");e&&(e.innerHTML=branches.map(e=>`<div class="bg-white rounded-lg card-shadow p-5 border-l-4 border-amber-500 interactive-card scroll-animate"><h3 class="font-bold text-lg">${e.emoji} ${e.name}</h3><p class="text-sm text-gray-600 mt-2">ğŸ“ ${e.address}</p><p class="text-sm text-gray-600 mt-1">ğŸ“ ${e.phone}</p></div>`).join(""))}
function addToCart(e,t=1){const n=products.find(t=>t.id===e),o=cart.find(t=>t.id===e);o?o.quantity+=t:cart.push({...n,quantity:t}),showNotification(`${n.name} Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o giá».`),updateProductCardActions(e),updateCartCounters(),updateMenuVisibility()}
function updateCartQuantity(e,t){let n=cart.find(t=>t.id===e);n?(n.quantity=Math.max(0,n.quantity+t),0===n.quantity&&(cart=cart.filter(t=>t.id!==e)),"cartSection"===document.querySelector("main > section:not(.hidden)").id?updateCartValues(e):(updateProductCardActions(e),updateCartCounters(),updateMenuVisibility())):t>0&&addToCart(e,t)}
function updateCartQuantityFromInput(e,t){const n=parseFloat(t);if(isNaN(n)||n<0)return;let o=cart.find(t=>t.id===e);0===n?cart=cart.filter(t=>t.id!==e):o?o.quantity=n:cart.push({...products.find(t=>t.id===e),quantity:n}),"cartSection"===document.querySelector("main > section:not(.hidden)").id?updateCartValues(e):(updateProductCardActions(e),updateCartCounters(),updateMenuVisibility())}
function updateCartValues(e){const t=cart.find(t=>t.id===e);if(t&&t.quantity>0){const e=document.getElementById(`item-total-${t.id}`);e&&(e.textContent=`${((t.salePrice||t.price)*t.quantity).toLocaleString()}Ä‘`)}else{const t=document.getElementById(`cart-item-row-${e}`);t&&t.remove()}const n=cart.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0),o=n+SHIPPING_FEE;document.getElementById("cart-subtotal").textContent=`${n.toLocaleString()}Ä‘`,document.getElementById("cart-final-total").textContent=`${o.toLocaleString()}Ä‘`,updateCartCounters(),0===cart.length&&updateCartDisplay()}
function updateCartCounters(){const e=cart.reduce((e,t)=>e+t.quantity,0),t=Number.isInteger(e)?e:e.toFixed(1);document.querySelectorAll("#cartCount, #mobileCartCount").forEach(e=>{e.textContent=t})}
function removeFromCart(e){cart=cart.filter(t=>t.id!==e),updateAllUI()}
function updateAllUI(){updateCartCounters(),updateMenuVisibility(),updateLoginUI();const e=document.querySelector("main > section:not(.hidden)");if(e){const t=e.id.replace("Section","");"menu"===t&&loadProducts(),"cart"===t&&updateCartDisplay(),"intro"===t&&loadFeaturedProducts(),setupScrollAnimations()}}
// <!-- Báº®T Äáº¦U CHá»ˆNH Sá»¬A: Sá»­a lá»—i logic hiá»ƒn thá»‹ giÃ¡ trong giá» hÃ ng -->
function updateCartDisplay(){const e=document.getElementById("cartContent");if(!e)return;if(cart.length===0)e.innerHTML=`<div class="text-center py-12"><h3 class="text-xl text-gray-600">Giá» hÃ ng cá»§a báº¡n Ä‘ang trá»‘ng.</h3><button onclick="showSection('menu')" class="mt-4 bg-emerald-600 text-white px-6 py-2 rounded-lg">Mua sáº¯m ngay</button></div>`;else{const t=cart.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0),n=t+SHIPPING_FEE;e.innerHTML=`<div class="grid lg:grid-cols-3 gap-6 items-start"><div class="lg:col-span-2 bg-white rounded-lg card-shadow p-4 md:p-5"><h3 class="text-xl font-semibold mb-4">Chi tiáº¿t Ä‘Æ¡n hÃ ng</h3><div id="cartItems" class="space-y-4">${cart.map(e=>`<div id="cart-item-row-${e.id}" class="flex flex-wrap items-center justify-between gap-x-4 gap-y-3 border-b pb-4 last:border-b-0 last:pb-0"><div class="flex items-center gap-3 flex-grow min-w-[200px]"><img src="${e.image}" onerror="this.onerror=null;this.src='${DEMO_IMAGE_URL}';" alt="${e.name}" class="w-16 h-16 md:w-20 md:h-20 bg-gray-100 rounded-lg object-cover flex-shrink-0"><div class="flex-1"><h3 class="font-semibold text-base">${e.name}</h3><p class="text-rose-600 text-sm">${(e.salePrice||e.price).toLocaleString()}Ä‘</p></div></div><div class="flex items-center gap-2 w-full sm:w-auto justify-end"><div class="flex items-center gap-1"><button onclick="updateCartQuantity(${e.id},-.5)" class="w-7 h-7 bg-gray-200 rounded-md font-bold">-</button><input type="number" value="${e.quantity}" step=".5" onchange="updateCartQuantityFromInput(${e.id},this.value)" class="w-12 h-7 text-center font-bold border-gray-300 border rounded-md"><button onclick="updateCartQuantity(${e.id},.5)" class="w-7 h-7 bg-gray-200 rounded-md font-bold">+</button></div><p id="item-total-${e.id}" class="font-bold text-base w-24 text-right">${((e.salePrice||e.price)*e.quantity).toLocaleString()}Ä‘</p><button onclick="removeFromCart(${e.id})" class="text-red-500 hover:text-red-700 p-1">âœ–</button></div></div>`).join("")}</div></div><div class="lg:col-span-1"><div class="bg-white rounded-lg card-shadow p-5 sticky top-24 space-y-5"><div><h3 class="text-xl font-semibold mb-4">ThÃ´ng tin giao hÃ ng</h3><form id="checkoutForm" class="space-y-3"><input type="tel" id="checkoutPhone" required placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i" class="w-full px-4 py-2 border rounded-lg bg-gray-50" onblur="checkCustomerByPhone(this.value)"><input type="text" id="checkoutName" required placeholder="Há» vÃ  tÃªn" class="w-full px-4 py-2 border rounded-lg bg-gray-50"><input type="text" id="checkoutAddress" required placeholder="Sá»‘ nhÃ /ÄÆ°á»ng, PhÆ°á»ng/XÃ£, Quáº­n/Huyá»‡n" class="w-full px-4 py-2 border rounded-lg bg-gray-50"><div id="registrationFields" class="hidden space-y-3 pt-2"><p class="text-sm text-blue-600 bg-blue-50 p-2 rounded-md">Sá»‘ Ä‘iá»‡n thoáº¡i má»›i! Vui lÃ²ng cung cáº¥p thÃªm thÃ´ng tin Ä‘á»ƒ táº¡o tÃ i khoáº£n.</p><div><label for="checkoutDob" class="text-sm font-medium text-gray-700">NgÃ y sinh</label><input type="date" id="checkoutDob" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50 text-gray-500"><p class="text-xs text-gray-500 mt-1">Äá»ƒ nháº­n Æ°u Ä‘Ã£i sinh nháº­t!</p></div><input type="password" id="checkoutPassword" placeholder="Táº¡o máº­t kháº©u (Ã­t nháº¥t 6 kÃ½ tá»±)" class="w-full px-4 py-2 border rounded-lg bg-gray-50"></div></form></div><div class="border-t pt-5"><h3 class="text-xl font-semibold mb-4">HÃ¬nh thá»©c thanh toÃ¡n</h3><div class="space-y-3"><div><input type="radio" name="paymentMethod" id="paymentBanking" value="banking" class="hidden payment-radio" checked><label for="paymentBanking" class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"><span class="text-2xl mr-3">ğŸ’³</span><div><span class="font-semibold">Thanh toÃ¡n Banking</span><p class="text-sm text-gray-500">Chuyá»ƒn khoáº£n tráº£ trÆ°á»›c.</p></div></label></div><div><input type="radio" name="paymentMethod" id="paymentDebt" value="debt" class="hidden payment-radio"><label for="paymentDebt" class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"><span class="text-2xl mr-3">ğŸ“‹</span><div><span class="font-semibold">Ghi cÃ´ng ná»£</span><p class="text-sm text-gray-500">Ãp dá»¥ng cho khÃ¡ch hÃ ng thÃ¢n thiáº¿t.</p></div></label></div></div></div><div class="border-t pt-5"><h3 class="text-xl font-semibold mb-4">Tá»•ng káº¿t</h3><div class="space-y-2"><div class="flex justify-between text-gray-600"><span>Táº¡m tÃ­nh:</span><span id="cart-subtotal">${t.toLocaleString()}Ä‘</span></div><div class="flex justify-between text-gray-600"><span>PhÃ­ giao hÃ ng:</span><span>${SHIPPING_FEE.toLocaleString()}Ä‘</span></div><div class="flex justify-between text-xl font-bold"><span class="text-gray-800">Tá»•ng thanh toÃ¡n:</span><span id="cart-final-total" class="text-rose-600">${n.toLocaleString()}Ä‘</span></div></div></div><div class="mt-2"><button onclick="proceedToOrder()" class="w-full bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 text-lg font-semibold transition-transform hover:scale-105">Äáº·t HÃ ng</button></div></div></div></div>`,isLoggedIn&&(document.getElementById("checkoutPhone").value=currentUser.phone,document.getElementById("checkoutName").value=currentUser.name,document.getElementById("checkoutAddress").value=currentUser.address)}}
// <!-- Káº¾T THÃšC CHá»ˆNH Sá»¬A -->
function checkCustomerByPhone(e){if(isLoggedIn)return;const t=demoUsers.find(t=>t.phone===e),n=document.getElementById("registrationFields"),o=document.getElementById("checkoutName"),a=document.getElementById("checkoutAddress"),d=document.getElementById("checkoutPassword");t?(o.value=t.name,a.value=t.address,n.classList.add("hidden"),d.required=!1):(o.value="",a.value="",n.classList.remove("hidden"),d.required=!0)}
async function proceedToOrder(){const e=document.getElementById("checkoutForm");if(!e||!e.checkValidity())return e.reportValidity(),void showNotification("Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin báº¯t buá»™c.",!0);const t=document.getElementById("checkoutAddress").value;if(!isAddressValid(t))return showNotification("Vui lÃ²ng nháº­p Ä‘á»‹a chá»‰ Ä‘áº§y Ä‘á»§ (Ã­t nháº¥t 10 kÃ½ tá»± vÃ  cÃ³ Ä‘á»§ 3 cáº¥p, vÃ­ dá»¥: Sá»‘ nhÃ /ÄÆ°á»ng, PhÆ°á»ng/XÃ£, Quáº­n/Huyá»‡n).",!0);const n=!document.getElementById("registrationFields").classList.contains("hidden");if(!isLoggedIn&&n){if(!await handleRegisterAndCheckout())return}const o=document.getElementById("checkoutAddress").value;if(isLoggedIn&&currentUser.address!==o&&confirm("Báº¡n cÃ³ muá»‘n cáº­p nháº­t Ä‘á»‹a chá»‰ giao hÃ ng má»›i nÃ y cho láº§n sau khÃ´ng?")){currentUser.address=o;const e=demoUsers.find(e=>e.id===currentUser.id);e&&(e.address=o),showNotification("ÄÃ£ cáº­p nháº­t Ä‘á»‹a chá»‰ má»›i.")}const a=document.querySelector('input[name="paymentMethod"]:checked').value,d=cart.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0),i=d+SHIPPING_FEE,r=document.getElementById("checkoutPhone").value;if("banking"===a)showBankingPayment(i);else if("debt"===a){const e=demoUsers.find(e=>e.phone===r);if(!e)return showNotification("SÄT chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ½ cÃ´ng ná»£.",!0);const t=e.debt+d;t>e.creditLimit?showDebtWarning(e):(e.debt=t,orderHistory.push({id:Date.now(),code:"DH"+Date.now().toString().slice(-6),status:"Äang xá»­ lÃ½",total:i,date:new Date,customerId:e.id,shipper:null,rating:null,items:cart.map(e=>({name:e.name,quantity:e.quantity,price:e.salePrice||e.price}))}),cart=[],showNotification("Äáº·t hÃ ng cÃ´ng ná»£ thÃ nh cÃ´ng!"),updateAllUI(),showSection("dashboard"))}}
function generateVietQRUrl(e,t){return`https://img.vietqr.io/image/970422-0934945967-compact2.png?amount=${e}&addInfo=${encodeURIComponent(t)}&accountName=${encodeURIComponent("NGUYEN CHI THANH")}`}
function showBankingPayment(e){const t=document.getElementById("bankingPaymentModal");t.innerHTML=TEMPLATES.bankingPaymentModal;const n="DH"+Date.now().toString().slice(-6),o=`TT ${n}`;document.getElementById("bankingQrImage").src=generateVietQRUrl(e,o),document.getElementById("bankingAmount").textContent=`${e.toLocaleString()}Ä‘`,document.getElementById("bankingContent").textContent=o,t.classList.remove("hidden")}
function confirmBankingPayment(){const e=cart.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0)+SHIPPING_FEE,t=isLoggedIn?currentUser.id:null;orderHistory.push({id:Date.now(),code:"DH"+Date.now().toString().slice(-6),status:"Äang xá»­ lÃ½",total:e,date:new Date,customerId:t,shipper:null,rating:null,items:cart.map(e=>({name:e.name,quantity:e.quantity,price:e.salePrice||e.price}))}),cart=[],closeModal("bankingPaymentModal"),showNotification("Thanh toÃ¡n thÃ nh cÃ´ng! ÄÆ¡n hÃ ng Ä‘ang Ä‘Æ°á»£c xá»­ lÃ½."),updateAllUI(),showSection(isLoggedIn?"dashboard":"intro")}
function showDebtWarning(e){const t=document.getElementById("debtWarningModal");t.innerHTML=TEMPLATES.debtWarningModal,document.getElementById("debtWarningContent").innerHTML=`<p>CÃ´ng ná»£ cá»§a SÄT <strong class="text-red-600">${e.phone}</strong> lÃ : <strong class="text-red-600">${e.debt.toLocaleString()}Ä‘</strong></p><p>Háº¡n má»©c cá»§a báº¡n lÃ : <strong>${e.creditLimit.toLocaleString()}Ä‘</strong></p><p>ÄÆ¡n hÃ ng má»›i Ä‘Ã£ vÆ°á»£t háº¡n má»©c tÃ­n dá»¥ng.</p>`,document.getElementById("debtQrImage").src=generateVietQRUrl(e.debt,`TT Cong No ${e.phone}`),t.setAttribute("data-customer-id",e.id),t.classList.remove("hidden")}
function confirmDebtPayment(){const e=document.getElementById("debtWarningModal"),t=e.getAttribute("data-customer-id"),n=demoUsers.find(e=>e.id==t);n&&(n.debt=0),showNotification("ÄÃ£ ghi nháº­n thanh toÃ¡n. Vui lÃ²ng Ä‘áº·t láº¡i Ä‘Æ¡n hÃ ng.",!1),closeModal("debtWarningModal"),updateAllUI(),showSection("cart")}
function handleLogin(e){e.preventDefault();const t=document.getElementById("loginIdentifier").value,n=document.getElementById("loginPassword").value,o=demoUsers.find(e=>(e.email===t||e.phone===t)&&e.password===n);o?(loginUser(o),postLoginAction?(postLoginAction(),postLoginAction=null):showSection("intro")):document.getElementById("loginMessage").innerHTML='<p class="text-red-500">ThÃ´ng tin khÃ´ng chÃ­nh xÃ¡c.</p>'}
function handleRegister(e){e.preventDefault();const t=document.getElementById("registerName").value,n=document.getElementById("registerPhone").value,o=document.getElementById("registerDob").value,a=document.getElementById("registerEmail").value,d=document.getElementById("registerAddress").value,i=document.getElementById("registerPassword").value,r=document.getElementById("registerMessage");if(!isAddressValid(d))return showNotification("Vui lÃ²ng nháº­p Ä‘á»‹a chá»‰ Ä‘áº§y Ä‘á»§ (Ã­t nháº¥t 10 kÃ½ tá»± vÃ  cÃ³ Ä‘á»§ 3 cáº¥p, vÃ­ dá»¥: Sá»‘ nhÃ /ÄÆ°á»ng, PhÆ°á»ng/XÃ£, Quáº­n/Huyá»‡n).",!0);if(demoUsers.some(e=>e.phone===n))return void(r.innerHTML='<p class="text-red-500">Sá»‘ Ä‘iá»‡n thoáº¡i Ä‘Ã£ tá»“n táº¡i.</p>');const s={id:Date.now(),name:t,email:a,phone:n,password:i,dob:o,debt:0,creditLimit:2e5,address:d};demoUsers.push(s),r.innerHTML='<p class="text-green-500">ÄÄƒng kÃ½ thÃ nh cÃ´ng! Äang tá»± Ä‘á»™ng Ä‘Äƒng nháº­p...</p>',setTimeout(()=>{loginUser(s),postLoginAction?(postLoginAction(),postLoginAction=null):showSection("intro")},1500)}
async function handleRegisterAndCheckout(){const e=document.getElementById("checkoutName").value,t=document.getElementById("checkoutPhone").value,n=document.getElementById("checkoutAddress").value,o=document.getElementById("checkoutPassword").value,a=document.getElementById("checkoutDob").value;if(o.length<6)return showNotification("Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±.",!0),!1;if(demoUsers.some(e=>e.phone===t))return showNotification("Sá»‘ Ä‘iá»‡n thoáº¡i Ä‘Ã£ tá»“n táº¡i. Vui lÃ²ng Ä‘Äƒng nháº­p.",!0),!1;const d={id:Date.now(),name:e,phone:t,address:n,password:o,email:"",dob:a,debt:0,creditLimit:2e5};return demoUsers.push(d),loginUser(d),showNotification(`ÄÄƒng kÃ½ thÃ nh cÃ´ng! ChÃ o má»«ng ${e}.`,!1),!0}
function loginUser(e){currentUser=e,isLoggedIn=!0,localStorage.setItem("loggedInUserId",e.id),updateAllUI()}
function logout(){currentUser=null,isLoggedIn=!1,localStorage.removeItem("loggedInUserId"),updateAllUI(),showSection("intro"),showNotification("ÄÃ£ Ä‘Äƒng xuáº¥t!")}
function loadDashboard(){isLoggedIn?(showDashboardTab("overview",document.querySelector(".dashboard-menu-item")),loadDashboardOverview()):(postLoginAction=()=>showSection("dashboard"),showSection("login"))}
function showDashboardTab(e,t){document.querySelectorAll(".dashboard-content").forEach(e=>e.classList.add("hidden")),document.getElementById(e+"Tab").classList.remove("hidden"),document.querySelectorAll(".dashboard-menu-item").forEach(e=>e.classList.remove("active")),t.classList.add("active"),"overview"===e&&loadDashboardOverview(),"orders"===e&&loadOrders(),"debt"===e&&loadDebtInfo(),"profile"===e&&loadProfileInfo(),setupScrollAnimations()}
function calculateMonthlyStats(e){const t={};return e.forEach(e=>{const n=e.date.toISOString().slice(0,7);t[n]||(t[n]={orderCount:0,totalRevenue:0,totalItems:0}),t[n].orderCount++,t[n].totalRevenue+=e.total,e.items.forEach(e=>{t[n].totalItems+=e.quantity})}),t}
function renderOrderList(e,t){const n=document.getElementById(t);if(!n)return;const o=e.map(e=>`<div class="p-4 border-b last:border-0 flex justify-between items-center hover:bg-gray-50"><div><p class="font-semibold text-emerald-700">${e.code}</p><p class="text-sm text-gray-600">${e.date.toLocaleDateString("vi-VN")}</p></div><div class="text-right"><p class="font-bold">${e.total.toLocaleString()}Ä‘</p><p class="text-sm ${"HoÃ n thÃ nh"===e.status?"text-green-600":"text-orange-500"}">${e.status}</p></div><div class="ml-2 flex-shrink-0"><button onclick="showOrderDetail(${e.id})" class="text-sm bg-gray-200 px-3 py-1 rounded-md hover:bg-gray-300">Xem</button></div></div>`).join("");n.innerHTML=e.length>0?o:'<p class="p-4 text-center text-gray-500">KhÃ´ng tÃ¬m tháº¥y Ä‘Æ¡n hÃ ng.</p>'}
function loadDashboardOverview(){const e=document.getElementById("overviewTab");if(!e)return;const t=orderHistory.filter(e=>e.customerId===currentUser.id).sort((e,t)=>t.date-e.date);e.innerHTML=`<h3 class="text-2xl font-bold mb-5">ChÃ o, ${currentUser.name}!</h3><div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6"><div class="bg-white p-4 rounded-lg shadow-md text-center"><p class="text-sm text-gray-500">Tá»•ng Sá»‘ ÄÆ¡n HÃ ng</p><p id="kpi-orders" class="text-2xl font-bold text-emerald-600">0</p></div><div class="bg-white p-4 rounded-lg shadow-md text-center"><p class="text-sm text-gray-500">Sáº£n Pháº©m ÄÃ£ Mua</p><p id="kpi-items" class="text-2xl font-bold text-emerald-600">0</p></div><div class="bg-white p-4 rounded-lg shadow-md text-center"><p class="text-sm text-gray-500">CÃ´ng Ná»£ Hiá»‡n Táº¡i</p><p id="kpi-debt" class="text-2xl font-bold text-red-600">0Ä‘</p></div></div><div class="bg-white p-4 rounded-lg shadow-md"><div class="flex flex-col md:flex-row justify-between md:items-center mb-4"><h4 class="font-bold text-lg">ÄÆ¡n hÃ ng gáº§n nháº¥t</h4><input type="text" id="order-search" placeholder="Tra cá»©u mÃ£ Ä‘Æ¡n, tráº¡ng thÃ¡i..." class="mt-2 md:mt-0 w-full md:w-64 border rounded-md p-1.5 text-sm"></div><div id="recent-orders-list" class="space-y-2"></div></div>`,document.getElementById("kpi-orders").textContent=t.length,document.getElementById("kpi-items").textContent=t.reduce((e,t)=>e+t.items.reduce((e,t)=>e+t.quantity,0),0),document.getElementById("kpi-debt").textContent=`${currentUser.debt.toLocaleString()}Ä‘`;const n=document.getElementById("order-search");n.onkeyup=()=>{const e=n.value.toLowerCase(),o=t.filter(t=>t.code.toLowerCase().includes(e)||t.status.toLowerCase().includes(e)||t.items.some(t=>t.name.toLowerCase().includes(e)));renderOrderList(o,"recent-orders-list")},renderOrderList(t.slice(0,5),"recent-orders-list"),setupScrollAnimations()}
function loadOrders(){const e=document.getElementById("ordersTab");if(!e)return;let t=orderHistory.filter(e=>e.customerId===currentUser.id).sort((e,t)=>t.date-e.date);0===t.length&&(t=[demoCompletedOrder]);e.innerHTML=`<h3 class="text-2xl font-bold mb-5">Lá»‹ch sá»­ Ä‘Æ¡n hÃ ng</h3><div class="bg-white rounded-lg card-shadow overflow-hidden"><div class="divide-y divide-gray-200">${t.length>0?t.map(e=>`<div class="p-4 hover:bg-gray-50 flex justify-between items-center"><div><p class="font-semibold text-emerald-700">${e.code}</p><p class="text-sm text-gray-600">${e.date.toLocaleDateString("vi-VN")}</p></div><div class="text-right"><p class="font-bold">${e.total.toLocaleString()}Ä‘</p><p class="text-sm ${"HoÃ n thÃ nh"===e.status?"text-green-600":"text-orange-500"}">${e.status}</p></div><div class="ml-4 flex-shrink-0"><button onclick="showOrderDetail(${e.id})" class="text-sm bg-gray-200 px-3 py-1 rounded-md hover:bg-gray-300">Xem</button></div></div>`).join(""):`<p class="p-6 text-center text-gray-500">ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o.</p>`}</div></div>`,setupScrollAnimations()}
function showOrderDetail(e){const t=orderHistory.find(t=>t.id===e)||demoCompletedOrder;if(!t)return;const n=document.getElementById("orderDetailModal");n.innerHTML=TEMPLATES.orderDetailModal,document.getElementById("detailOrderCode").textContent=t.code,document.getElementById("detailOrderStatus").textContent=t.status,document.getElementById("detailOrderDate").textContent=t.date.toLocaleString("vi-VN",{dateStyle:"short",timeStyle:"short"}),document.getElementById("detailOrderCustomer").textContent=currentUser.name,document.getElementById("detailOrderShipper").textContent=t.shipper||"ChÆ°a cÃ³",document.getElementById("detailOrderTotal").textContent=t.total.toLocaleString()+"Ä‘";const o=t.items.map(e=>`<div class="flex justify-between py-1"><p>${e.name} (x${e.quantity})</p><p>${(e.price*e.quantity).toLocaleString()}Ä‘</p></div>`).join("");document.getElementById("detailOrderItems").innerHTML=o;const a=document.getElementById("order-actions");t.bill_image_url&&(a.innerHTML=`<a href="${t.bill_image_url}" target="_blank" class="block w-full text-center bg-blue-500 text-white py-2 rounded-lg font-semibold hover:bg-blue-600">Xem hÃ³a Ä‘Æ¡n</a>`);const d=document.getElementById("orderHistoryLog");t.history_log&&(d.innerHTML=t.history_log.map(e=>`<div class="relative"><div class="absolute -left-1.5 mt-1.5 w-3 h-3 bg-emerald-500 rounded-full"></div><div class="ml-4"><p class="font-semibold text-gray-800">${e.status}</p><p class="text-xs text-gray-500">${e.timestamp.toLocaleString("vi-VN",{dateStyle:"short",timeStyle:"short"})} - bá»Ÿi ${e.actor}</p></div></div>`).join(""));const i=document.getElementById("ratingSection");"HoÃ n thÃ nh"===t.status?t.rating?i.innerHTML=`<h4 class="font-semibold text-lg mb-2">ÄÃ¡nh giÃ¡ cá»§a báº¡n</h4><div class="flex items-center space-x-1 text-amber-500">${Array.from({length:5}).map((n,o)=>`<span>${o<t.rating.stars?"â˜…":"â˜†"}</span>`).join("")}</div><p class="mt-2 text-gray-700 italic">"${t.rating.comment}"</p>`:i.innerHTML=`<h4 class="font-semibold text-lg mb-2">ÄÃ¡nh giÃ¡ Ä‘Æ¡n hÃ ng</h4><p class="text-sm text-gray-600 mb-4">Sá»± hÃ i lÃ²ng cá»§a báº¡n lÃ  Ä‘á»™ng lá»±c cá»§a chÃºng tÃ´i!</p><div class="flex justify-center text-gray-300 space-x-2 mb-4 rating-stars">${[1,2,3,4,5].map(e=>`<span data-value="${e}">â˜…</span>`).join("")}</div><textarea id="ratingComment" class="w-full p-3 border rounded-lg bg-gray-50" rows="3" placeholder="Chia sáº» cáº£m nháº­n cá»§a báº¡n..."></textarea><div class="mt-4 flex justify-end"><button id="submitRatingBtn" class="px-6 py-2 bg-amber-500 text-white rounded-lg">Gá»­i Ä‘Ã¡nh giÃ¡</button></div>`:i.innerHTML="",n.classList.remove("hidden");let r=0;const l=n.querySelectorAll(".rating-stars span");l.forEach(e=>{e.onclick=()=>{r=e.dataset.value,l.forEach(t=>t.style.color=t.dataset.value<=r?"#f59e0b":"#d1d5db")}});const s=n.querySelector("#submitRatingBtn");s&&(s.onclick=()=>{t&&(t.rating={stars:r,comment:document.getElementById("ratingComment").value},showNotification("Cáº£m Æ¡n báº¡n Ä‘Ã£ Ä‘Ã¡nh giÃ¡!"),closeModal("orderDetailModal"),loadOrders())})}
function loadDebtInfo(){const e=document.getElementById("debtTab");e&&(e.innerHTML=`<h3 class="text-2xl font-bold mb-5">Quyáº¿t toÃ¡n CÃ´ng ná»£</h3><div class="bg-white p-6 rounded-lg card-shadow text-center"><p class="text-lg text-gray-600">CÃ´ng ná»£ hiá»‡n táº¡i cá»§a báº¡n</p><p class="text-5xl font-bold text-red-600 my-4">${currentUser.debt.toLocaleString()}Ä‘</p><p class="text-gray-500 mb-6">Háº¡n má»©c tÃ­n dá»¥ng: ${currentUser.creditLimit.toLocaleString()}Ä‘</p><button onclick="showDebtWarning(currentUser)" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-transform hover:scale-105">Thanh toÃ¡n ngay</button></div>`)}
function loadProfileInfo(){const e=document.getElementById("profileTab");e&&(e.innerHTML=`<h3 class="text-2xl font-bold mb-5">ThÃ´ng tin tÃ i khoáº£n</h3><div class="bg-white p-5 rounded-lg card-shadow"><form id="profileForm" class="space-y-4"><div><label class="font-medium text-sm text-gray-700">Há» vÃ  tÃªn</label><input type="text" id="profileName" value="${currentUser.name}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50"></div><div><label class="font-medium text-sm text-gray-700">NgÃ y sinh</label><input type="date" id="profileDob" value="${currentUser.dob||""}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50"></div><div><label class="font-medium text-sm text-gray-700">Sá»‘ Ä‘iá»‡n thoáº¡i</label><input type="tel" id="profilePhone" value="${currentUser.phone}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-200" readonly></div><div><label class="font-medium text-sm text-gray-700">Email</label><input type="email" id="profileEmail" value="${currentUser.email||""}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50"></div><div><label class="font-medium text-sm text-gray-700">Äá»‹a chá»‰</label><input type="text" id="profileAddress" value="${currentUser.address}" placeholder="Sá»‘ nhÃ /ÄÆ°á»ng, PhÆ°á»ng/XÃ£, Quáº­n/Huyá»‡n" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50"></div><div class="pt-4"><button type="submit" class="bg-emerald-600 text-white px-6 py-2.5 rounded-lg font-semibold transition-transform hover:scale-105">Cáº­p nháº­t</button></div></form></div>`,document.getElementById("profileForm").addEventListener("submit",e=>{e.preventDefault();const t=document.getElementById("profileAddress").value;if(!isAddressValid(t))return showNotification("Vui lÃ²ng nháº­p Ä‘á»‹a chá»‰ Ä‘áº§y Ä‘á»§ (Ã­t nháº¥t 10 kÃ½ tá»± vÃ  cÃ³ Ä‘á»§ 3 cáº¥p, vÃ­ dá»¥: Sá»‘ nhÃ /ÄÆ°á»ng, PhÆ°á»ng/XÃ£, Quáº­n/Huyá»‡n).",!0);currentUser.name=document.getElementById("profileName").value,currentUser.dob=document.getElementById("profileDob").value,currentUser.email=document.getElementById("profileEmail").value,currentUser.address=t;const n=demoUsers.find(e=>e.id===currentUser.id);n&&Object.assign(n,{name:currentUser.name,dob:currentUser.dob,email:currentUser.email,address:currentUser.address}),showNotification("Cáº­p nháº­t thÃ´ng tin thÃ nh cÃ´ng!"),updateLoginUI()}))}
function handleFranchiseClick(){isLoggedIn?(showSection("dashboard"),showDashboardTab("franchise",document.querySelector('[onclick*="franchise"]'))):(postLoginAction=()=>showSection("dashboard"),showNotification("Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ Ä‘Äƒng kÃ½ nhÆ°á»£ng quyá»n.",!0),showSection("login"))}
function showNotification(e,t=!1){const n=document.createElement("div");n.className=`fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white text-sm z-50 ${t?"bg-red-500":"bg-green-500"}`,n.textContent=e,document.body.appendChild(n),setTimeout(()=>n.remove(),4e3)}
function updateLoginUI(){document.getElementById("notLoggedIn").classList.toggle("hidden",isLoggedIn),document.getElementById("loggedIn").classList.toggle("hidden",!isLoggedIn),isLoggedIn&&(document.getElementById("userName").textContent=currentUser.name.split(" ").pop())}
function toggleUserDropdown(){document.getElementById("userDropdownMenu").classList.toggle("show")}
function closeUserDropdown(){document.getElementById("userDropdownMenu").classList.remove("show")}
function setupScrollAnimations(){const e=new IntersectionObserver((t,n)=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("is-visible"),n.unobserve(t.target))})},{rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".scroll-animate").forEach(t=>{e.observe(t)})}
document.addEventListener("DOMContentLoaded",()=>{initAnnouncements();const e=localStorage.getItem("loggedInUserId");if(e){const t=demoUsers.find(t=>t.id==e);t&&loginUser(t)}const t=window.innerWidth<768;showSection(t?"menu":"intro"),updateAllUI(),window.addEventListener("click",e=>{document.querySelector(".dropdown")?.contains(e.target)||closeUserDropdown()})});
const GITHUB_REPO_URL="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/",DEMO_IMAGE_URL="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/cha-ca-vung-tau.jpg";
const products=[{id:1,name:"BÃ¡nh mÃ¬ cháº£ cÃ¡ nÃ³ng",price:2e4,salePrice:18e3,category:"banhmi",sold:215,image:GITHUB_REPO_URL+"banh-mi-cha-ca-nong.jpg"},{id:10,name:"BÃ¡nh mÃ¬ que",price:15e3,salePrice:null,category:"banhmi",sold:180,image:GITHUB_REPO_URL+"banh-mi-que.jpg"},{id:2,name:"Cháº£ cÃ¡ tÆ°Æ¡i (kg)",price:12e4,salePrice:null,category:"chaca",sold:95,image:GITHUB_REPO_URL+"cha-ca-tuoi.jpg"},{id:6,name:"Cháº£ cÃ¡ Nha Trang (kg)",price:15e4,salePrice:135e3,category:"chaca",sold:120,image:GITHUB_REPO_URL+"cha-ca-nha-trang.jpg"},{id:7,name:"Cháº£ cÃ¡ sá»£i (kg)",price:11e4,salePrice:null,category:"chaca",sold:80,image:GITHUB_REPO_URL+"cha-ca-soi.jpg"},{id:11,name:"Cháº£ cÃ¡ viÃªn",price:1e4,salePrice:null,category:"chaca",sold:350,image:GITHUB_REPO_URL+"cha-ca-vien.jpg"},{id:3,name:"BÃ¡nh mÃ¬ nem nÆ°á»›ng",price:25e3,salePrice:null,category:"banhmi",sold:150,image:GITHUB_REPO_URL+"banh-mi-nem-nuong.png"},{id:4,name:"XÃ´i cháº£ cÃ¡ Ä‘áº·c biá»‡t",price:3e4,salePrice:25e3,category:"combo",sold:90,image:GITHUB_REPO_URL+"xoi-cha-ca-dac-biet.jpg"},{id:5,name:"Combo gia Ä‘Ã¬nh 4 ngÆ°á»i",price:15e4,salePrice:null,category:"combo",sold:45,image:GITHUB_REPO_URL+"combo-gia-dinh.jpg"},{id:8,name:"NÆ°á»›c máº¯m",price:15e3,salePrice:null,category:"phukien",sold:200,image:GITHUB_REPO_URL+"nuoc-mam.jpg"},{id:9,name:"KhÄƒn láº¡nh",price:2e3,salePrice:null,category:"phukien",sold:500,image:GITHUB_REPO_URL+"khan.jpg"},{id:12,name:"Bao bÃ¬ Cam",price:1e3,salePrice:null,category:"phukien",sold:100,image:GITHUB_REPO_URL+"bao-bi-cam.jpg"},{id:13,name:"Bao bÃ¬ Xanh",price:1e3,salePrice:null,category:"phukien",sold:150,image:GITHUB_REPO_URL+"bao-bi-xanh.jpg"},{id:14,name:"Bao bÃ¬ XÃ¡m",price:1e3,salePrice:null,category:"phukien",sold:120,image:GITHUB_REPO_URL+"bao-bi-xam.jpg"},{id:15,name:"Bao bÃ¬ Äá»",price:1e3,salePrice:null,category:"phukien",sold:130,image:GITHUB_REPO_URL+"bao-bi-do.jpg"}];
const branches=[{id:"q1",name:"Chi nhÃ¡nh Quáº­n 1",emoji:"ğŸ¢",address:"123 ÄÆ°á»ng A, Quáº­n 1, TPHCM",phone:"028.123.4567"},{id:"gv",name:"Chi nhÃ¡nh GÃ² Váº¥p",emoji:"ğŸª",address:"456 ÄÆ°á»ng B, Quáº­n GÃ² Váº¥p, TPHCM",phone:"028.234.5678"},{id:"bt",name:"Chi nhÃ¡nh BÃ¬nh Tháº¡nh",emoji:"ğŸ˜ï¸",address:"789 ÄÆ°á»ng C, Quáº­n BÃ¬nh Tháº¡nh, TPHCM",phone:"028.456.7890"}];
</script>
</html>
