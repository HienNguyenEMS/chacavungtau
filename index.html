<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·ªìng Nh√¢n Food - B√°nh M√¨ & Th·ª±c Ph·∫©m S·∫°ch</title>
    
    <meta name="description" content="ƒê·ªìng Nh√¢n Food chuy√™n cung c·∫•p b√°nh m√¨ ch·∫£ c√° n√≥ng, ch·∫£ c√° t∆∞∆°i V≈©ng T√†u, combo ti·ªán l·ª£i. Cam k·∫øt nguy√™n li·ªáu s·∫°ch, an to√†n v·ªá sinh. ƒê·∫∑t h√†ng online, giao t·∫≠n n∆°i.">
    
    <meta property="og:title" content="ƒê·ªìng Nh√¢n Food - B√°nh M√¨ & Th·ª±c Ph·∫©m S·∫°ch">
    <meta property="og:description" content="Th∆∞·ªüng th·ª©c b√°nh m√¨ ch·∫£ c√° n√≥ng gi√≤n, ch·∫£ c√° t∆∞∆°i ngon v√† c√°c s·∫£n ph·∫©m s·∫°ch t·ª´ ƒê·ªìng Nh√¢n Food. ƒê·∫∑t h√†ng ngay h√¥m nay!">
    <meta property="og:image" content="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/thumbnail-share.jpg">
    <meta property="og:url" content="https://chacavungtau.shop/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ƒê·ªìng Nh√¢n Food - B√°nh M√¨ & Th·ª±c Ph·∫©m S·∫°ch">
    <meta name="twitter:description" content="Th∆∞·ªüng th·ª©c b√°nh m√¨ ch·∫£ c√° n√≥ng gi√≤n, ch·∫£ c√° t∆∞∆°i ngon v√† c√°c s·∫£n ph·∫©m s·∫°ch t·ª´ ƒê·ªìng Nh√¢n Food. ƒê·∫∑t h√†ng ngay h√¥m nay!">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/thumbnail-share.jpg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #047857 0%, #064e3b 100%); }
        .card-shadow { box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        
        .interactive-card { 
            transition: all 0.3s ease-in-out; 
            border: 1px solid #e5e7eb;
        }
        .interactive-card:hover { 
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 20px rgba(16, 185, 129, 0.2); 
            border-color: #065f46;
        }

        .info-card {
            transition: all 0.3s ease-in-out;
            border: 1px solid #e5e7eb;
        }
        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(16, 185, 129, 0.2); 
            border-color: #065f46;
        }
        
        .dropdown { position: relative; }
        .dropdown-menu { position: absolute; top: 100%; right: 0; background: white; border-radius: 8px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); min-width: 200px; z-index: 50; transform: translateY(10px) scale(0.95); opacity: 0; visibility: hidden; transition: all 0.2s ease; }
        .dropdown-menu.show { transform: translateY(0) scale(1); opacity: 1; visibility: visible; }
        .mobile-nav-btn.active { color: #059669; background-color: #f0fdf4; }
        .dashboard-menu-item { display: flex; align-items: center; padding: 0.75rem 1rem; border-radius: 0.5rem; font-weight: 500; color: #4b5563; transition: all 0.2s ease-in-out; }
        .dashboard-menu-item:hover { background-color: #f3f4f6; }
        .dashboard-menu-item.active { background-color: #d1fae5; color: #047857; font-weight: 600; }
        .category-btn.active { background-color: #059669; color: white; border-color: #059669; }
        .payment-radio:checked + label { border-color: #059669; background-color: #f0fdf4; box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.5); }
        .rating-stars span { cursor: pointer; font-size: 2.5rem; color: #d1d5db; transition: color 0.2s; }
        
        .scroll-animate {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .scroll-animate.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        @media (max-width: 768px) { main { padding-bottom: 80px; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        main > section { padding-top: 1.5rem; padding-bottom: 1.5rem; }
    </style>
</head>
<body class="bg-gray-50">
    <header class="gradient-bg text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between gap-x-2">
                <div class="flex items-center space-x-3 cursor-pointer flex-shrink-0" onclick="showSection('intro')">
                    <img src="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/logo.jpg" alt="Logo" class="w-10 h-10 rounded-lg">
                    <div><h1 class="text-lg md:text-xl font-bold">ƒê·ªìng Nh√¢n Food</h1></div>
                </div>
                <div class="relative flex-grow md:hidden ml-2">
                    <input type="text" placeholder="T√¨m ki·∫øm..." class="w-full bg-white bg-opacity-20 rounded-lg pl-4 pr-10 py-2 text-sm placeholder-emerald-100 focus:outline-none focus:bg-opacity-30 transition-all duration-300">
                    <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-emerald-100" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <div class="relative flex-grow max-w-xl hidden md:block">
                    <input type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." class="w-full bg-white bg-opacity-20 rounded-full px-5 py-2 text-sm placeholder-emerald-100 focus:outline-none focus:bg-opacity-30 transition-all duration-300">
                    <svg class="absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-emerald-100" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <div class="flex items-center flex-shrink-0">
                    <nav class="hidden md:flex space-x-5 items-center">
                        <button onclick="showSection('intro')" class="hover:text-amber-300 transition-colors">Trang ch·ªß</button>
                        <button onclick="showSection('menu')" class="hover:text-amber-300 transition-colors">S·∫£n ph·∫©m</button>
                        <button onclick="showSection('stores')" class="hover:text-amber-300 transition-colors">C·ª≠a h√†ng</button>
                        <button id="navCart" onclick="showSection('cart')" class="hover:text-amber-300 transition-colors relative hidden">Gi·ªè h√†ng <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span></button>
                    </nav>
                    <div id="userMenuContainer" class="relative ml-4">
                        <div id="notLoggedIn" class="flex space-x-3">
                            <button onclick="showSection('login')" class="bg-white bg-opacity-20 px-3 py-1.5 rounded-lg hover:bg-opacity-30 hidden md:block transition-transform hover:scale-105">ƒêƒÉng nh·∫≠p</button>
                            <button onclick="showSection('register')" class="bg-amber-400 text-slate-800 px-3 py-1.5 rounded-lg hover:bg-amber-300 font-semibold hidden md:block transition-transform hover:scale-105">ƒêƒÉng k√Ω</button>
                        </div>
                        <div id="loggedIn" class="hidden">
                            <div class="dropdown">
                                <button onclick="toggleUserDropdown()" class="flex items-center space-x-2 bg-white bg-opacity-20 px-3 py-1.5 rounded-lg hover:bg-opacity-30"><span class="text-xl">üë§</span><span id="userName" class="font-medium hidden md:inline"></span><svg class="w-4 h-4 transition-transform hidden md:inline" id="userDropdownIcon" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button>
                                <div id="userDropdownMenu" class="dropdown-menu"><button onclick="showSection('dashboard'); closeUserDropdown();" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-emerald-50 flex items-center space-x-2"><span>üìä</span><span>Dashboard</span></button><hr class="my-1"><button onclick="logout(); closeUserDropdown();" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 flex items-center space-x-2"><span>üö™</span><span>ƒêƒÉng xu·∫•t</span></button></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <div id="announcementBar" class="bg-yellow-100 text-red-600 text-base font-bold text-center py-2 px-4"><p id="announcementText"></p></div>
    
    <div class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t z-40">
        <div id="mobileNavGrid" class="grid grid-cols-3 h-16">
            <button onclick="showSection('intro')" class="mobile-nav-btn flex flex-col items-center justify-center space-y-1 text-gray-600" data-section="intro"><span class="text-xl">üè†</span><span class="text-xs font-medium">Trang ch·ªß</span></button>
            <button onclick="showSection('menu')" class="mobile-nav-btn flex flex-col items-center justify-center space-y-1 text-gray-600 active" data-section="menu"><span class="text-xl">ü•ñ</span><span class="text-xs font-medium">S·∫£n ph·∫©m</span></button>
            <button id="mobileNavCart" onclick="showSection('cart')" class="mobile-nav-btn flex-col items-center justify-center space-y-1 text-gray-600 relative hidden" data-section="cart"><span class="text-xl">üõí</span><span class="text-xs font-medium">Gi·ªè h√†ng</span><span id="mobileCartCount" class="absolute top-1 right-4 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span></button>
            <button onclick="isLoggedIn ? showSection('dashboard') : showSection('login')" class="mobile-nav-btn flex flex-col items-center justify-center space-y-1 text-gray-600" data-section="account"><span class="text-xl">üë§</span><span class="text-xs font-medium">T√†i kho·∫£n</span></button>
        </div>
    </div>

    <main class="container mx-auto px-2 sm:px-4 pt-2 pb-6">
        <section id="introSection" class="animate-fade-in"></section>
        <section id="menuSection" class="hidden animate-fade-in"></section>
        <section id="storesSection" class="hidden animate-fade-in"></section>
        <section id="cartSection" class="hidden animate-fade-in"></section>
        <section id="loginSection" class="hidden animate-fade-in"></section>
        <section id="registerSection" class="hidden animate-fade-in"></section>
        <section id="dashboardSection" class="hidden animate-fade-in"></section>
    </main>
    
    <footer class="bg-emerald-800 text-white pt-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-5">
                <div>
                    <div class="flex items-center space-x-2 mb-3"><img src="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/logo.jpg" alt="Logo" class="w-10 h-10 rounded-lg"><span class="font-bold text-lg">ƒê·ªìng Nh√¢n Food</span></div>
                    <p class="text-emerald-200 text-sm">Mang nh·ªØng s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng, an to√†n v√† ti·ªán l·ª£i ƒë·∫øn m·ªçi nh√†.</p>
                </div>
                <div>
                    <h3 class="font-bold mb-3">Li√™n h·ªá</h3>
                    <ul class="space-y-1.5 text-emerald-200 text-sm">
                        <li><strong>Hotline:</strong> 0934.945.967</li>
                        <li><strong>Email:</strong> info@chacavungtau.shop</li>
                        <li><strong>Tr·ª• s·ªü:</strong> 3/564 ·∫§p 64, Xu√¢n Th·ªõi S∆°n, TPHCM</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold mb-3">K·∫øt n·ªëi v·ªõi ch√∫ng t√¥i</h3>
                     <div class="flex space-x-4">
                        <a href="https://www.facebook.com/share/15xupWfZQz/" target="_blank" rel="noopener noreferrer" class="text-emerald-200 hover:text-white" title="Facebook"><img src="https://upload.wikimedia.org/wikipedia/commons/0/05/Facebook_Logo_%282019%29.png" alt="Facebook" class="w-6 h-6"></a>
                        <a href="https://www.tiktok.com/@ch.c.vng.tung.nhn?_t=ZS-8zLJLzE0RRV&_r=1" target="_blank" rel="noopener noreferrer" class="text-emerald-200 hover:text-white" title="Tiktok"><img src="https://cdn4.iconfinder.com/data/icons/social-media-flat-7/64/Social-media_Tiktok-512.png" alt="Tiktok" class="w-6 h-6"></a>
                        <a href="https://www.youtube.com/@NguyenChi-md4gs" target="_blank" rel="noopener noreferrer" class="text-emerald-200 hover:text-white" title="Youtube"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/YouTube_full-color_icon_%282017%29.svg/256px-YouTube_full-color_icon_%282017%29.svg.png" alt="Youtube" class="w-6 h-6"></a>
                        <a href="https://zalo.me/3635285758582238200" target="_blank" rel="noopener noreferrer" class="text-emerald-200 hover:text-white" title="Zalo OA"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Icon_of_Zalo.svg/2048px-Icon_of_Zalo.svg.png" alt="Zalo" class="w-6 h-6"></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-emerald-700 py-4 text-center text-sm text-emerald-400"><p>&copy; 2025 ƒê·ªìng Nh√¢n Food | All Rights Reserved | <a href="#" class="hover:text-white">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</a> | <a href="#" class="hover:text-white">Tuy√™n b·ªë quy·ªÅn ri√™ng t∆∞</a></p></div>
        </div>
    </footer>


    <div id="bankingPaymentModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"></div>
    <div id="debtWarningModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"></div>
    <div id="ratingModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"></div>
    <div id="orderDetailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"></div>

    <div class="fixed bottom-20 right-5 z-40 flex flex-col space-y-3">
        <a href="https://zalo.me/0917353504" target="_blank" rel="noopener noreferrer" class="w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-transform transform hover:scale-110" title="Chat Zalo"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Icon_of_Zalo.svg/2048px-Icon_of_Zalo.svg.png" alt="Zalo" class="w-12 h-12"></a>
        <a href="tel:+84917353504" class="w-14 h-14 bg-green-500 rounded-full flex items-center justify-center shadow-lg hover:bg-green-600 transition-transform transform hover:scale-110" title="G·ªçi Hotline"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></a>
    </div>
</body>

<script>
const announcements=[ "üéâ ƒêang k·ª≥ ngh·ªâ l·ªÖ Qu·ªëc kh√°nh, c√°c ƒë∆°n h√†ng ƒë·∫∑t t·ª´ 31/08 ƒë·∫øn 02/09 s·∫Ω ƒë∆∞·ª£c giao t·ª´ 03-05/09/2025, mong kh√°ch h√†ng th√¥ng c·∫£m.", "üí∞ M·ªùi c√°c b·∫°n c·∫≠p nh·∫≠t ch√≠nh s√°ch hoa h·ªìng ƒë·∫°i l√Ω theo s·∫£n l∆∞·ª£ng ƒë·∫∑t h√†ng - Li√™n h·ªá ngay ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt!", "üöö Mi·ªÖn ph√≠ giao h√†ng cho ƒë∆°n h√†ng t·ª´ 200.000ƒë trong n·ªôi th√†nh TP.HCM", "‚≠ê Khuy·∫øn m√£i ƒë·∫∑c bi·ªát: Gi·∫£m 15% cho kh√°ch h√†ng m·ªõi khi ƒë·∫∑t h√†ng l·∫ßn ƒë·∫ßu" ];
let currentAnnouncementIndex=0;
function showAnnouncement(){const e=document.getElementById("announcementBar"),t=document.getElementById("announcementText");announcements.length>0?(t.textContent=announcements[currentAnnouncementIndex],e.classList.remove("hidden"),currentAnnouncementIndex=(currentAnnouncementIndex+1)%announcements.length):e.classList.add("hidden")}
function initAnnouncements(){showAnnouncement(),setInterval(showAnnouncement,8e3)}
let cart=[],currentUser=null,isLoggedIn=!1,currentCategory="all",postLoginAction=null,currentSort="best-selling";
const SHIPPING_FEE=15e3;

let demoUsers=[{id:1,name:"Nguy·ªÖn VƒÉn A",email:"demo@example.com",phone:"0901234567",password:"123456",debt:15e4,creditLimit:2e5,address:"123 ƒê∆∞·ªùng ABC, Ph∆∞·ªùng 1, TP V≈©ng T√†u", dob: "1990-01-15"},{id:2,name:"Tr·∫ßn Th·ªã B",email:"b@example.com",phone:"0987654321",password:"123456",debt:19e4,creditLimit:2e5,address:"456 ƒê∆∞·ªùng XYZ, Ph∆∞·ªùng 2, TP V≈©ng T√†u", dob: null}];

let orderHistory=[{id:1,code:"DH12345",status:"ƒêang x·ª≠ l√Ω",total:153e3,date:new Date("2025-08-26"),customerId:1,shipper:null,rating:null,items:[{name:"Ch·∫£ c√° t∆∞∆°i (kg)",quantity:1,price:12e4},{name:"B√°nh m√¨ ch·∫£ c√° n√≥ng",quantity:1,price:18e3}]},{id:2,code:"DH12346",status:"Ho√†n th√†nh",total:175e3,date:new Date("2025-08-25"),customerId:1,shipper:"Nguy·ªÖn VƒÉn Giao",rating:null,items:[{name:"Ch·∫£ c√° Nha Trang (kg)",quantity:1,price:135e3},{name:"B√°nh m√¨ nem n∆∞·ªõng",quantity:1,price:25e3}]}];
const demoCompletedOrder={id:999,code:"DH-DEMO",status:"Ho√†n th√†nh",total:101e3,date:new Date("2025-08-24 08:15:00"),customerId:null,shipper:"Tr·∫ßn Th·ªã V·∫≠n",completed_by:"Tr·∫ßn Th·ªã V·∫≠n",bill_image_url:"https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/bill-demo.jpg",rating:null,items:[{name:"X√¥i ch·∫£ c√° ƒë·∫∑c bi·ªát",quantity:2,price:25e3},{name:"B√°nh m√¨ ch·∫£ c√° n√≥ng",quantity:2,price:18e3}],history_log:[{timestamp:new Date("2025-08-24 08:15:00"),status:"ƒê√£ ti·∫øp nh·∫≠n",actor:"H·ªá th·ªëng"},{timestamp:new Date("2025-08-24 08:20:00"),status:"ƒêang ƒë√≥ng g√≥i",actor:"L√™ VƒÉn C"},{timestamp:new Date("2025-08-24 08:45:00"),status:"B√†n giao v·∫≠n chuy·ªÉn",actor:"L√™ VƒÉn C"},{timestamp:new Date("2025-08-24 09:10:00"),status:"Ho√†n th√†nh",actor:"Tr·∫ßn Th·ªã V·∫≠n"}]};
const TEMPLATES={
    intro:`<div class="bg-emerald-600 text-white rounded-2xl p-6 md:p-8 mb-8 card-shadow"><div class="text-center relative z-10"><h1 class="text-3xl md:text-5xl font-bold mb-3 scroll-animate">B√°nh M√¨ Ngon - G·∫Øn K·∫øt C·ªông ƒê·ªìng</h1><p class="text-md md:text-xl mb-5 text-emerald-100 scroll-animate">S·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng t·ª´ ƒê·ªìng Nh√¢n Food</p><div class="grid grid-cols-2 gap-3 mx-auto max-w-sm md:max-w-md scroll-animate"><a href="tel:+84934945967" class="flex items-center justify-center space-x-2 bg-rose-600 hover:bg-rose-700 text-white px-2 py-2.5 rounded-full transition-transform hover:scale-105 text-sm font-semibold"><span class="text-lg">üìû</span><span>Hotline</span></a><button onclick="showSection('menu')" class="flex items-center justify-center space-x-2 bg-white text-emerald-600 px-2 py-2.5 rounded-full font-semibold hover:bg-emerald-50 transition-transform hover:scale-105 text-sm"><span>Xem s·∫£n ph·∫©m</span></button></div></div></div><div class="bg-white rounded-lg card-shadow p-4 md:p-6 mb-8 scroll-animate"><h2 class="text-2xl font-bold text-center text-emerald-800 mb-6">S·∫£n Ph·∫©m N·ªïi B·∫≠t</h2><div id="featuredProductsGrid" class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6"></div><div class="text-center mt-6"><button onclick="showSection('menu')" class="bg-emerald-600 text-white px-6 py-2.5 rounded-full font-semibold hover:bg-emerald-700 transition-transform hover:scale-105">Xem T·∫•t C·∫£ S·∫£n Ph·∫©m</button></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 text-center scroll-animate"><div class="bg-white p-4 rounded-lg info-card"><div class="text-3xl mb-2">üåø</div><h3 class="text-lg font-bold mb-1">Nguy√™n Li·ªáu S·∫°ch</h3><p class="text-gray-600 text-sm">Ngu·ªìn nguy√™n li·ªáu ƒë∆∞·ª£c ch·ªçn l·ªçc k·ªπ l∆∞·ª°ng.</p></div><div class="bg-white p-4 rounded-lg info-card"><div class="text-3xl mb-2">üõ°Ô∏è</div><h3 class="text-lg font-bold mb-1">An To√†n V·ªá Sinh</h3><p class="text-gray-600 text-sm">Quy tr√¨nh s·∫£n xu·∫•t ƒë·∫°t chu·∫©n an to√†n.</p></div><div class="bg-white p-4 rounded-lg info-card"><div class="text-3xl mb-2">üöö</div><h3 class="text-lg font-bold mb-1">Ti·ªán L·ª£i & Nhanh Ch√≥ng</h3><p class="text-gray-600 text-sm">H·ªá th·ªëng ph√¢n ph·ªëi r·ªông kh·∫Øp, giao nhanh.</p></div><div class="bg-white p-4 rounded-lg info-card"><div class="text-3xl mb-2">ü§ù</div><h3 class="text-lg font-bold mb-1">H·ªó Tr·ª£ Kh·ªüi Nghi·ªáp</h3><p class="text-gray-600 text-sm">Gi·∫£i ph√°p xe b√°nh m√¨ chuy√™n nghi·ªáp, gi√° c·∫°nh tranh.</p></div></div><div class="bg-white rounded-lg card-shadow grid md:grid-cols-2 gap-6 items-center scroll-animate"><div class="p-5 md:p-8"><div><h2 class="text-2xl font-bold text-emerald-800 mb-4">V·ªÅ ƒê·ªìng Nh√¢n Food</h2><div class="text-gray-700 space-y-3"><p>V·ªõi kinh nghi·ªám l√¢u nƒÉm, ƒê·ªìng Nh√¢n Food t·ª± h√†o mang ƒë·∫øn nh·ªØng s·∫£n ph·∫©m kh√¥ng ch·ªâ ngon mi·ªáng m√† c√≤n ƒë·∫£m b·∫£o an to√†n tuy·ªát ƒë·ªëi cho s·ª©c kh·ªèe. Ch√∫ng t√¥i chuy√™n:</p><ul class="space-y-2 list-inside list-disc marker:text-emerald-500"><li>Cung c·∫•p Ch·∫£ C√° S·ª£i, Ch·∫£ C√° T∆∞∆°i, Ch·∫£ C√° Ch·ª£, Ch·∫£ C√° Nha Trang.</li><li>H∆∞·ªõng d·∫´n kh·ªüi nghi·ªáp m√¥ h√¨nh kinh doanh b√°nh m√¨ ch·∫£ c√°.</li><li>Cung c·∫•p v√† cho thu√™ xe b√°nh m√¨, h·ªó tr·ª£ ƒë·ªëi t√°c t·ªëi ƒëa.</li></ul></div></div><div class="gradient-bg text-white rounded-lg p-6 text-center mt-6"><h2 class="text-2xl font-bold mb-3">S·∫µn s√†ng th∆∞·ªüng th·ª©c?</h2><button onclick="showSection('menu')" class="bg-white text-emerald-600 px-6 py-2.5 rounded-full font-semibold hover:bg-emerald-50 mt-2 transition-transform hover:scale-105">ƒê·∫∑t H√†ng Ngay</button></div></div><div class="aspect-w-16 aspect-h-9 rounded-r-lg overflow-hidden h-full"><iframe class="w-full h-full" src="https://www.youtube.com/embed/5kSmizoku8s" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>`,
    menu:`<h2 class="text-2xl md:text-3xl font-bold text-emerald-800 mb-6 text-center scroll-animate">S·∫£n Ph·∫©m C·ªßa Ch√∫ng T√¥i</h2><div class="flex flex-col sm:flex-row sm:flex-wrap sm:items-center sm:justify-between gap-4 mb-6 scroll-animate"><div id="category-filters" class="flex-grow flex flex-wrap justify-center sm:justify-start gap-2"><button onclick="filterProducts('all', this)" class="category-btn active px-3 py-1.5 text-sm">T·∫•t c·∫£</button><button onclick="filterProducts('banhmi', this)" class="category-btn bg-white border px-3 py-1.5 text-sm">B√°nh M√¨</button><button onclick="filterProducts('chaca', this)" class="category-btn bg-white border px-3 py-1.5 text-sm">Ch·∫£ C√°</button><button onclick="filterProducts('combo', this)" class="category-btn bg-white border px-3 py-1.5 text-sm">Combo</button><button onclick="filterProducts('phukien', this)" class="category-btn bg-white border px-3 py-1.5 text-sm">Ph·ª• ki·ªán</button></div><div class="flex-shrink-0 w-full sm:w-auto"><select id="sort-selector" onchange="handleSortChange(this)" class="w-full border rounded-md p-2 text-sm bg-white shadow-sm"><option value="best-selling">S·∫£n ph·∫©m b√°n ch·∫°y</option><option value="newest">S·∫£n ph·∫©m m·ªõi nh·∫•t</option><option value="price-asc">Gi√°: Th·∫•p ƒë·∫øn Cao</option><option value="price-desc">Gi√°: Cao ƒë·∫øn Th·∫•p</option></select></div></div><div id="productGrid" class="grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 md:gap-4"></div>`,
    stores:`<h2 class="text-3xl font-bold text-emerald-800 mb-6 text-center">H·ªá Th·ªëng C·ª≠a H√†ng</h2><div id="storeGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-5"></div>`,
    cart:`<div class="max-w-7xl mx-auto"><h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Gi·ªè H√†ng & Thanh To√°n</h2><div id="cartContent"></div></div>`,
    login:`<div class="max-w-md mx-auto bg-white rounded-lg card-shadow p-6"><h2 class="text-3xl font-bold text-center mb-6">ƒêƒÉng Nh·∫≠p</h2><form id="loginForm"><div class="space-y-4"><input type="text" id="loginIdentifier" required placeholder="Email ho·∫∑c SƒêT" class="w-full px-4 py-3 border rounded-lg"><input type="password" id="loginPassword" required placeholder="M·∫≠t kh·∫©u" class="w-full px-4 py-3 border rounded-lg"><button type="submit" class="w-full bg-emerald-600 text-white py-3 rounded-lg font-semibold transition-transform hover:scale-105">ƒêƒÉng nh·∫≠p</button></div></form><div id="loginMessage" class="mt-4 text-center text-sm"></div><p class="mt-5 text-center">Ch∆∞a c√≥ t√†i kho·∫£n? <button onclick="showSection('register')" class="text-emerald-600 font-medium">ƒêƒÉng k√Ω</button></p></div>`,
    register:`<div class="max-w-md mx-auto bg-white rounded-lg card-shadow p-6"><h2 class="text-3xl font-bold text-center mb-6">ƒêƒÉng K√Ω T√†i Kho·∫£n</h2>
        <form id="registerForm" class="space-y-4">
            <div>
                <label for="registerName" class="font-medium text-gray-700 text-sm">H·ªç v√† t√™n <span class="text-red-500">*</span></label>
                <input type="text" id="registerName" required placeholder="Nguy·ªÖn VƒÉn A" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <div>
                <label for="registerPhone" class="font-medium text-gray-700 text-sm">S·ªë ƒëi·ªán tho·∫°i <span class="text-red-500">*</span></label>
                <input type="tel" id="registerPhone" required placeholder="0901234567" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <div>
                <label for="registerDob" class="font-medium text-gray-700 text-sm">Ng√†y sinh</label>
                <input type="date" id="registerDob" class="w-full mt-1 px-4 py-3 border rounded-lg text-gray-500">
                <p class="text-xs text-gray-500 mt-1">Nh·∫≠p ng√†y sinh ƒë·ªÉ nh·∫≠n m√£ gi·∫£m gi√° ƒë·∫øn 30% trong th√°ng sinh nh·∫≠t c·ªßa b·∫°n!</p>
            </div>
            <div>
                <label for="registerEmail" class="font-medium text-gray-700 text-sm">Email (Kh√¥ng b·∫Øt bu·ªôc)</label>
                <input type="email" id="registerEmail" placeholder="email@example.com" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <div>
                <label for="registerAddress" class="font-medium text-gray-700 text-sm">ƒê·ªãa ch·ªâ nh·∫≠n h√†ng <span class="text-red-500">*</span></label>
                <input type="text" id="registerAddress" required placeholder="123 ƒê∆∞·ªùng ABC, Ph∆∞·ªùng 1, Qu·∫≠n 1, TPHCM" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <div>
                <label for="registerPassword" class="font-medium text-gray-700 text-sm">M·∫≠t kh·∫©u <span class="text-red-500">*</span></label>
                <input type="password" id="registerPassword" required minlength="6" placeholder="√çt nh·∫•t 6 k√Ω t·ª±" class="w-full mt-1 px-4 py-3 border rounded-lg">
            </div>
            <button type="submit" class="w-full bg-emerald-600 text-white py-3 rounded-lg font-semibold transition-transform hover:scale-105 !mt-6">T·∫°o t√†i kho·∫£n</button>
        </form>
        <div id="registerMessage" class="mt-4 text-center text-sm"></div>
        <p class="mt-5 text-center">ƒê√£ c√≥ t√†i kho·∫£n? <button onclick="showSection('login')" class="text-emerald-600 font-medium">ƒêƒÉng nh·∫≠p</button></p>
    </div>`,
    dashboard:`<div class="flex flex-col md:flex-row gap-6"><div class="w-full md:w-64 flex-shrink-0"><div class="bg-white rounded-lg card-shadow p-4 space-y-2"><button onclick="showDashboardTab('overview', this)" class="dashboard-menu-item active w-full"><span>üìä</span><span>T·ªïng quan</span></button><button onclick="showDashboardTab('orders', this)" class="dashboard-menu-item w-full"><span>üì¶</span><span>ƒê∆°n h√†ng</span></button><button onclick="showDashboardTab('debt', this)" class="dashboard-menu-item w-full"><span>üí∞</span><span>C√¥ng n·ª£</span></button><button onclick="showDashboardTab('profile', this)" class="dashboard-menu-item w-full"><span>üë§</span><span>T√†i kho·∫£n</span></button></div></div><div class="flex-1"><div id="overviewTab" class="dashboard-content"></div><div id="ordersTab" class="dashboard-content hidden"></div><div id="debtTab" class="dashboard-content hidden"></div><div id="profileTab" class="dashboard-content hidden"></div></div></div>`,
    bankingPaymentModal:`<div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-md w-full animate-fade-in"><h3 class="text-2xl font-bold text-center mb-4">Thanh to√°n chuy·ªÉn kho·∫£n</h3><p class="text-center text-gray-600 mb-6">Vui l√≤ng qu√©t m√£ QR ƒë·ªÉ thanh to√°n.</p><div class="flex justify-center mb-4"><img id="bankingQrImage" src="" alt="M√£ QR thanh to√°n" class="w-64 h-64 border rounded-lg"></div><div class="bg-gray-50 rounded-lg p-4 text-center space-y-2"><p>S·ªë ti·ªÅn: <strong id="bankingAmount" class="text-xl text-red-600"></strong></p><p>N·ªôi dung: <strong id="bankingContent" class="text-lg text-blue-600"></strong></p></div><div class="mt-6 flex justify-end space-x-3"><button onclick="closeModal('bankingPaymentModal')" class="px-6 py-2 bg-gray-200 rounded-lg">H·ªßy</button><button onclick="confirmBankingPayment()" class="px-6 py-2 bg-emerald-600 text-white rounded-lg">T√¥i ƒë√£ thanh to√°n</button></div></div>`,
    debtWarningModal:`<div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-lg w-full animate-fade-in"><h3 class="text-2xl font-bold text-center mb-4 text-red-700">‚ö†Ô∏è C·∫£nh b√°o C√¥ng N·ª£</h3><div id="debtWarningContent" class="text-center text-gray-700 mb-6 space-y-2"></div><p class="text-center text-gray-600 mb-4">Vui l√≤ng thanh to√°n c√¥ng n·ª£ ƒë·ªÉ ti·∫øp t·ª•c.</p><div class="flex justify-center mb-4"><img id="debtQrImage" src="" alt="M√£ QR thanh to√°n c√¥ng n·ª£" class="w-64 h-64 border rounded-lg"></div><div class="mt-6 flex justify-end space-x-3"><button onclick="closeModal('debtWarningModal')" class="px-6 py-2 bg-gray-200 rounded-lg">ƒê·ªÉ sau</button><button onclick="confirmDebtPayment()" class="px-6 py-2 bg-blue-600 text-white rounded-lg">T√¥i ƒë√£ thanh to√°n</button></div></div>`,
    orderDetailModal:`<div class="bg-white rounded-lg shadow-xl p-4 sm:p-6 max-w-2xl w-full animate-fade-in max-h-[90vh] overflow-y-auto"><div class="flex justify-between items-start mb-4"><h3 class="text-xl sm:text-2xl font-bold">Chi ti·∫øt ƒë∆°n h√†ng <span id="detailOrderCode" class="text-emerald-600"></span></h3><button onclick="closeModal('orderDetailModal')" class="text-2xl text-gray-500 hover:text-gray-800">&times;</button></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3 text-sm text-gray-700 mb-4"><div class="flex justify-between"><strong>Tr·∫°ng th√°i:</strong> <span id="detailOrderStatus" class="font-semibold text-right"></span></div><div class="flex justify-between"><strong>Ng√†y ƒë·∫∑t:</strong> <span id="detailOrderDate" class="text-right"></span></div><div class="flex justify-between"><strong>Ng∆∞·ªùi nh·∫≠n:</strong> <span id="detailOrderCustomer" class="text-right"></span></div><div class="flex justify-between"><strong>Ng∆∞·ªùi giao:</strong> <span id="detailOrderShipper" class="text-right"></span></div><div class="flex justify-between col-span-1 sm:col-span-2 text-base"><strong>T·ªïng ti·ªÅn:</strong> <span id="detailOrderTotal" class="font-bold text-lg text-rose-600"></span></div></div><h4 class="font-semibold text-lg mb-2">S·∫£n ph·∫©m:</h4><div id="detailOrderItems" class="space-y-2 border-t border-b py-3 mb-4 text-sm"></div><div id="order-actions" class="mb-4"></div><h4 class="font-semibold text-lg mb-2">L·ªãch s·ª≠ ƒë∆°n h√†ng</h4><div id="orderHistoryLog" class="border-l-2 border-emerald-500 pl-4 space-y-4 text-sm"></div><div id="ratingSection" class="mt-6 border-t pt-4"></div></div>`
};
function showSection(e){const t=document.getElementById(e+"Section");document.querySelectorAll("main > section").forEach(e=>e.classList.add("hidden")),t&&(t.innerHTML=TEMPLATES[e]||"",t.classList.remove("hidden")),updateMobileNavigation(e),window.scrollTo(0,0),e.match(/login|register/)&&document.getElementById(`${e}Form`).addEventListener("submit","login"===e?handleLogin:handleRegister),"intro"===e&&loadFeaturedProducts(),"menu"===e&&filterProducts(currentCategory,document.querySelector(".category-btn.active")),"stores"===e&&loadStores(),"cart"===e&&updateCartDisplay(),"dashboard"===e&&loadDashboard(),setupScrollAnimations()}
function updateMobileNavigation(e){document.querySelectorAll(".mobile-nav-btn").forEach(t=>{const n=t.getAttribute("data-section");let o=n===e;"account"===n&&["login","register","dashboard"].includes(e)&&(o=!0),t.classList.toggle("active",o)})}
function updateMenuVisibility(){const e=cart.length>0;document.getElementById("navCart").classList.toggle("hidden",!e);const t=document.getElementById("mobileNavCart");t.classList.toggle("hidden",!e),t.classList.toggle("flex",e);const n=document.getElementById("mobileNavGrid"),o=3+(e?1:0);n.style.gridTemplateColumns=`repeat(${o}, 1fr)`}
function closeModal(e){const t=document.getElementById(e);t&&(t.innerHTML="",t.classList.add("hidden"))}
function loadFeaturedProducts(){const e=document.getElementById("featuredProductsGrid");e&&(e.innerHTML=products.slice(0,4).map(e=>renderProductCard(e)).join(""))}
function filterProducts(e,t){currentCategory=e,document.querySelectorAll("#category-filters .category-btn").forEach(e=>e.classList.remove("active")),t.classList.add("active"),loadProducts()}
function handleSortChange(e){currentSort=e.value,loadProducts()}
function loadProducts(){const e=document.getElementById("productGrid");if(!e)return;let t="all"===currentCategory?products.slice():products.filter(e=>e.category===currentCategory);switch(currentSort){case"best-selling":t.sort((e,t)=>t.sold-e.sold);break;case"price-asc":t.sort((e,t)=>(e.salePrice||e.price)-(t.salePrice||t.price));break;case"price-desc":t.sort((e,t)=>(t.salePrice||t.price)-(e.salePrice||e.price));break;case"newest":t.sort((e,t)=>t.id-e.id)}e.innerHTML=t.map(e=>renderProductCard(e)).join(""),document.getElementById("sort-selector")&&(document.getElementById("sort-selector").value=currentSort),setupScrollAnimations()}
function renderProductCard(e){const t=e.salePrice&&e.salePrice<e.price,n=t?e.salePrice:e.price,o=t?Math.round((e.price-n)/e.price*100):0;return`<div class="bg-white rounded-lg card-shadow overflow-hidden interactive-card flex flex-col scroll-animate"><div class="aspect-[16/9] w-full overflow-hidden relative">${t?`<div class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-md z-10">-${o}%</div>`:""}<img src="${e.image}" onerror="this.onerror=null;this.src='${DEMO_IMAGE_URL}';" alt="${e.name}" class="w-full h-full object-cover bg-gray-100"></div><div class="p-3 md:p-4 flex flex-col flex-grow"><h3 class="font-bold text-sm md:text-base mb-2 truncate" title="${e.name}">${e.name}</h3><div class="mt-auto space-y-2"><div class="flex items-center justify-between"><div><span class="font-semibold text-rose-600 text-base md:text-lg">${n.toLocaleString()}ƒë</span>${t?`<span class="line-through text-gray-400 text-xs md:text-sm ml-1">${e.price.toLocaleString()}ƒë</span>`:""}</div></div><div id="product-actions-${e.id}" class="w-full flex-shrink-0">${generateProductActions(e)}</div></div></div></div>`}
function generateProductActions(e){const t=cart.find(t=>t.id===e.id);return t?`<div class="flex flex-col space-y-1.5"><div class="flex items-center justify-end gap-1"><button onclick="updateCartQuantity(${e.id}, -0.5)" class="w-6 h-6 md:w-7 md:h-7 bg-gray-200 rounded-md font-bold text-lg flex-shrink-0">-</button><input type="number" value="${t.quantity}" step="0.5" onchange="updateCartQuantityFromInput(${e.id}, this.value)" class="w-10 h-7 md:w-12 md:h-8 text-center font-bold border-gray-300 border rounded-md"><button onclick="updateCartQuantity(${e.id}, 0.5)" class="w-6 h-6 md:w-7 md:h-7 bg-gray-200 rounded-md font-bold text-lg flex-shrink-0">+</button></div><button onclick="showSection('cart')" class="w-full bg-amber-500 text-white py-1 rounded-md text-xs font-semibold hover:bg-amber-600 transition-transform hover:scale-105">Thanh to√°n</button></div>`:`<button onclick="addToCart(${e.id})" class="w-full text-white py-1.5 md:py-2 rounded-lg font-semibold bg-emerald-600 hover:bg-emerald-700 transition-colors text-sm transition-transform hover:scale-105">Mua ngay</button>`}
function updateProductCardActions(e){const t=document.getElementById(`product-actions-${e}`),n=products.find(t=>t.id===e);t&&(t.innerHTML=generateProductActions(n))}
function loadStores(){const e=document.getElementById("storeGrid");e&&(e.innerHTML=branches.map(e=>`<div class="bg-white rounded-lg card-shadow p-5 border-l-4 border-amber-500 interactive-card scroll-animate"><h3 class="font-bold text-lg">${e.emoji} ${e.name}</h3><p class="text-sm text-gray-600 mt-2">üìç ${e.address}</p><p class="text-sm text-gray-600 mt-1">üìû ${e.phone}</p></div>`).join(""))}
function addToCart(e,t=1){const n=products.find(t=>t.id===e),o=cart.find(t=>t.id===e);o?o.quantity+=t:cart.push({...n,quantity:t}),showNotification(`${n.name} ƒë√£ ƒë∆∞·ª£c th√™m v√†o gi·ªè.`),updateProductCardActions(e),updateCartCounters(),updateMenuVisibility()}
function updateCartQuantity(e,t){let n=cart.find(t=>t.id===e);n?(n.quantity=Math.max(0,n.quantity+t),0===n.quantity&&(cart=cart.filter(t=>t.id!==e)),"cartSection"===document.querySelector("main > section:not(.hidden)").id?updateCartValues(e):(updateProductCardActions(e),updateCartCounters(),updateMenuVisibility())):t>0&&addToCart(e,t)}
function updateCartQuantityFromInput(e,t){const n=parseFloat(t);if(isNaN(n)||n<0)return;let o=cart.find(t=>t.id===e);0===n?cart=cart.filter(t=>t.id!==e):o?o.quantity=n:cart.push({...products.find(t=>t.id===e),quantity:n}),"cartSection"===document.querySelector("main > section:not(.hidden)").id?updateCartValues(e):(updateProductCardActions(e),updateCartCounters(),updateMenuVisibility())}
function updateCartValues(e){const t=cart.find(t=>t.id===e);if(t&&t.quantity>0){const e=document.getElementById(`item-total-${t.id}`);e&&(e.textContent=`${((t.salePrice||t.price)*t.quantity).toLocaleString()}ƒë`)}else{const t=document.getElementById(`cart-item-row-${e}`);t&&t.remove()}const n=cart.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0),o=n+SHIPPING_FEE;document.getElementById("cart-subtotal").textContent=`${n.toLocaleString()}ƒë`,document.getElementById("cart-final-total").textContent=`${o.toLocaleString()}ƒë`,updateCartCounters(),0===cart.length&&updateCartDisplay()}
function updateCartCounters(){const e=cart.reduce((e,t)=>e+t.quantity,0),t=Number.isInteger(e)?e:e.toFixed(1);document.querySelectorAll("#cartCount, #mobileCartCount").forEach(e=>{e.textContent=t})}
function removeFromCart(e){cart=cart.filter(t=>t.id!==e),updateAllUI()}
function updateAllUI(){updateCartCounters(),updateMenuVisibility(),updateLoginUI();const e=document.querySelector("main > section:not(.hidden)");if(e){const t=e.id.replace("Section","");"menu"===t&&loadProducts(),"cart"===t&&updateCartDisplay(),"intro"===t&&loadFeaturedProducts(),setupScrollAnimations()}}

// <!-- B·∫ÆT ƒê·∫¶U CH·ªàNH S·ª¨A: C·∫≠p nh·∫≠t form gi·ªè h√†ng ƒë·ªÉ th√™m tr∆∞·ªùng ng√†y sinh -->
function updateCartDisplay() {
    const cartContent = document.getElementById("cartContent");
    if (!cartContent) return;

    if (cart.length === 0) {
        cartContent.innerHTML = `<div class="text-center py-12"><h3 class="text-xl text-gray-600">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.</h3><button onclick="showSection('menu')" class="mt-4 bg-emerald-600 text-white px-6 py-2 rounded-lg">Mua s·∫Øm ngay</button></div>`;
    } else {
        const subtotal = cart.reduce((sum, item) => sum + (item.salePrice || item.price) * item.quantity, 0);
        const finalTotal = subtotal + SHIPPING_FEE;
        cartContent.innerHTML = `
            <div class="grid lg:grid-cols-3 gap-6 items-start">
                <div class="lg:col-span-2 bg-white rounded-lg card-shadow p-4 md:p-5">
                    <h3 class="text-xl font-semibold mb-4">Chi ti·∫øt ƒë∆°n h√†ng</h3>
                    <div id="cartItems" class="space-y-4">${cart.map(item => `
                        <div id="cart-item-row-${item.id}" class="flex flex-wrap items-center justify-between gap-x-4 gap-y-3 border-b pb-4 last:border-b-0 last:pb-0">
                            <div class="flex items-center gap-3 flex-grow min-w-[200px]">
                                <img src="${item.image}" onerror="this.onerror=null;this.src='${DEMO_IMAGE_URL}';" alt="${item.name}" class="w-16 h-16 md:w-20 md:h-20 bg-gray-100 rounded-lg object-cover flex-shrink-0">
                                <div class="flex-1">
                                    <h3 class="font-semibold text-base">${item.name}</h3>
                                    <p class="text-rose-600 text-sm">${(item.salePrice || item.price).toLocaleString()}ƒë</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-2 w-full sm:w-auto justify-end">
                                <div class="flex items-center gap-1">
                                    <button onclick="updateCartQuantity(${item.id}, -0.5)" class="w-7 h-7 bg-gray-200 rounded-md font-bold">-</button>
                                    <input type="number" value="${item.quantity}" step="0.5" onchange="updateCartQuantityFromInput(${item.id}, this.value)" class="w-12 h-7 text-center font-bold border-gray-300 border rounded-md">
                                    <button onclick="updateCartQuantity(${item.id}, 0.5)" class="w-7 h-7 bg-gray-200 rounded-md font-bold">+</button>
                                </div>
                                <p id="item-total-${item.id}" class="font-bold text-base w-24 text-right">${((item.salePrice || item.price) * item.quantity).toLocaleString()}ƒë</p>
                                <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700 p-1">‚úñ</button>
                            </div>
                        </div>`).join("")}
                    </div>
                </div>
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-lg card-shadow p-5 sticky top-24 space-y-5">
                        <div>
                            <h3 class="text-xl font-semibold mb-4">Th√¥ng tin giao h√†ng</h3>
                            <form id="checkoutForm" class="space-y-3">
                                <input type="tel" id="checkoutPhone" required placeholder="S·ªë ƒëi·ªán tho·∫°i" class="w-full px-4 py-2 border rounded-lg bg-gray-50" onblur="checkCustomerByPhone(this.value)">
                                <input type="text" id="checkoutName" required placeholder="H·ªç v√† t√™n" class="w-full px-4 py-2 border rounded-lg bg-gray-50">
                                <input type="text" id="checkoutAddress" required placeholder="ƒê·ªãa ch·ªâ nh·∫≠n h√†ng" class="w-full px-4 py-2 border rounded-lg bg-gray-50">
                                <div id="registrationFields" class="hidden space-y-3 pt-2">
                                    <p class="text-sm text-blue-600 bg-blue-50 p-2 rounded-md">S·ªë ƒëi·ªán tho·∫°i m·ªõi! Vui l√≤ng cung c·∫•p th√™m th√¥ng tin ƒë·ªÉ t·∫°o t√†i kho·∫£n.</p>
                                    <div>
                                        <label for="checkoutDob" class="text-sm font-medium text-gray-700">Ng√†y sinh</label>
                                        <input type="date" id="checkoutDob" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50 text-gray-500">
                                        <p class="text-xs text-gray-500 mt-1">ƒê·ªÉ nh·∫≠n ∆∞u ƒë√£i sinh nh·∫≠t!</p>
                                    </div>
                                    <input type="password" id="checkoutPassword" placeholder="T·∫°o m·∫≠t kh·∫©u (√≠t nh·∫•t 6 k√Ω t·ª±)" class="w-full px-4 py-2 border rounded-lg bg-gray-50">
                                </div>
                            </form>
                        </div>
                        <div class="border-t pt-5">
                            <h3 class="text-xl font-semibold mb-4">H√¨nh th·ª©c thanh to√°n</h3>
                            <div class="space-y-3">
                                <div><input type="radio" name="paymentMethod" id="paymentBanking" value="banking" class="hidden payment-radio" checked><label for="paymentBanking" class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"><span class="text-2xl mr-3">üí≥</span><div><span class="font-semibold">Thanh to√°n Banking</span><p class="text-sm text-gray-500">Chuy·ªÉn kho·∫£n tr·∫£ tr∆∞·ªõc.</p></div></label></div>
                                <div><input type="radio" name="paymentMethod" id="paymentDebt" value="debt" class="hidden payment-radio"><label for="paymentDebt" class="flex items-center p-3 border-2 rounded-lg cursor-pointer transition"><span class="text-2xl mr-3">üìã</span><div><span class="font-semibold">Ghi c√¥ng n·ª£</span><p class="text-sm text-gray-500">√Åp d·ª•ng cho kh√°ch h√†ng th√¢n thi·∫øt.</p></div></label></div>
                            </div>
                        </div>
                        <div class="border-t pt-5">
                            <h3 class="text-xl font-semibold mb-4">T·ªïng k·∫øt</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between text-gray-600"><span>T·∫°m t√≠nh:</span><span id="cart-subtotal">${subtotal.toLocaleString()}ƒë</span></div>
                                <div class="flex justify-between text-gray-600"><span>Ph√≠ giao h√†ng:</span><span>${SHIPPING_FEE.toLocaleString()}ƒë</span></div>
                                <div class="flex justify-between text-xl font-bold"><span class="text-gray-800">T·ªïng thanh to√°n:</span><span id="cart-final-total" class="text-rose-600">${finalTotal.toLocaleString()}ƒë</span></div>
                            </div>
                        </div>
                        <div class="mt-2"><button onclick="proceedToOrder()" class="w-full bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 text-lg font-semibold transition-transform hover:scale-105">ƒê·∫∑t H√†ng</button></div>
                    </div>
                </div>
            </div>`;
        if (isLoggedIn) {
            document.getElementById("checkoutPhone").value = currentUser.phone;
            document.getElementById("checkoutName").value = currentUser.name;
            document.getElementById("checkoutAddress").value = currentUser.address;
        }
    }
}
// <!-- K·∫æT TH√öC CH·ªàNH S·ª¨A -->

function checkCustomerByPhone(e){if(isLoggedIn)return;const t=demoUsers.find(t=>t.phone===e),n=document.getElementById("registrationFields"),o=document.getElementById("checkoutName"),a=document.getElementById("checkoutAddress"),d=document.getElementById("checkoutPassword");t?(o.value=t.name,a.value=t.address,n.classList.add("hidden"),d.required=!1):(o.value="",a.value="",n.classList.remove("hidden"),d.required=!0)}
async function proceedToOrder(){const e=document.getElementById("checkoutForm");if(!e||!e.checkValidity())return e.reportValidity(),void showNotification("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin.",!0);const t=!document.getElementById("registrationFields").classList.contains("hidden");if(!isLoggedIn&&t){if(!await handleRegisterAndCheckout())return}const n=document.getElementById("checkoutAddress").value;if(isLoggedIn&&currentUser.address!==n&&confirm("B·∫°n c√≥ mu·ªën c·∫≠p nh·∫≠t ƒë·ªãa ch·ªâ giao h√†ng m·ªõi n√†y cho l·∫ßn sau kh√¥ng?")){currentUser.address=n;const e=demoUsers.find(e=>e.id===currentUser.id);e&&(e.address=n),showNotification("ƒê√£ c·∫≠p nh·∫≠t ƒë·ªãa ch·ªâ m·ªõi.")}const o=document.querySelector('input[name="paymentMethod"]:checked').value,a=cart.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0),d=a+SHIPPING_FEE,i=document.getElementById("checkoutPhone").value;if("banking"===o)showBankingPayment(d);else if("debt"===o){const e=demoUsers.find(e=>e.phone===i);if(!e)return void showNotification("SƒêT ch∆∞a ƒë∆∞·ª£c ƒëƒÉng k√Ω c√¥ng n·ª£.",!0);const t=e.debt+a;t>e.creditLimit?showDebtWarning(e):(e.debt=t,orderHistory.push({id:Date.now(),code:"DH"+Date.now().toString().slice(-6),status:"ƒêang x·ª≠ l√Ω",total:d,date:new Date,customerId:e.id,shipper:null,rating:null,items:cart.map(e=>({name:e.name,quantity:e.quantity,price:e.salePrice||e.price}))}),cart=[],showNotification("ƒê·∫∑t h√†ng c√¥ng n·ª£ th√†nh c√¥ng!"),updateAllUI(),showSection("dashboard"))}}
function generateVietQRUrl(e,t){return`https://img.vietqr.io/image/970422-0934945967-compact2.png?amount=${e}&addInfo=${encodeURIComponent(t)}&accountName=${encodeURIComponent("NGUYEN CHI THANH")}`}
function showBankingPayment(e){const t=document.getElementById("bankingPaymentModal");t.innerHTML=TEMPLATES.bankingPaymentModal;const n="DH"+Date.now().toString().slice(-6),o=`TT ${n}`;document.getElementById("bankingQrImage").src=generateVietQRUrl(e,o),document.getElementById("bankingAmount").textContent=`${e.toLocaleString()}ƒë`,document.getElementById("bankingContent").textContent=o,t.classList.remove("hidden")}
function confirmBankingPayment(){const e=cart.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0)+SHIPPING_FEE,t=isLoggedIn?currentUser.id:null;orderHistory.push({id:Date.now(),code:"DH"+Date.now().toString().slice(-6),status:"ƒêang x·ª≠ l√Ω",total:e,date:new Date,customerId:t,shipper:null,rating:null,items:cart.map(e=>({name:e.name,quantity:e.quantity,price:e.salePrice||e.price}))}),cart=[],closeModal("bankingPaymentModal"),showNotification("Thanh to√°n th√†nh c√¥ng! ƒê∆°n h√†ng ƒëang ƒë∆∞·ª£c x·ª≠ l√Ω."),updateAllUI(),showSection(isLoggedIn?"dashboard":"intro")}
function showDebtWarning(e){const t=document.getElementById("debtWarningModal");t.innerHTML=TEMPLATES.debtWarningModal,document.getElementById("debtWarningContent").innerHTML=`<p>C√¥ng n·ª£ c·ªßa SƒêT <strong class="text-red-600">${e.phone}</strong> l√†: <strong class="text-red-600">${e.debt.toLocaleString()}ƒë</strong></p><p>H·∫°n m·ª©c c·ªßa b·∫°n l√†: <strong>${e.creditLimit.toLocaleString()}ƒë</strong></p><p>ƒê∆°n h√†ng m·ªõi ƒë√£ v∆∞·ª£t h·∫°n m·ª©c t√≠n d·ª•ng.</p>`,document.getElementById("debtQrImage").src=generateVietQRUrl(e.debt,`TT Cong No ${e.phone}`),t.setAttribute("data-customer-id",e.id),t.classList.remove("hidden")}
function confirmDebtPayment(){const e=document.getElementById("debtWarningModal"),t=e.getAttribute("data-customer-id"),n=demoUsers.find(e=>e.id==t);n&&(n.debt=0),showNotification("ƒê√£ ghi nh·∫≠n thanh to√°n. Vui l√≤ng ƒë·∫∑t l·∫°i ƒë∆°n h√†ng.",!1),closeModal("debtWarningModal"),updateAllUI(),showSection("cart")}
function handleLogin(e){e.preventDefault();const t=document.getElementById("loginIdentifier").value,n=document.getElementById("loginPassword").value,o=demoUsers.find(e=>(e.email===t||e.phone===t)&&e.password===n);o?(loginUser(o),postLoginAction?(postLoginAction(),postLoginAction=null):showSection("intro")):document.getElementById("loginMessage").innerHTML='<p class="text-red-500">Th√¥ng tin kh√¥ng ch√≠nh x√°c.</p>'}
function handleRegister(e){e.preventDefault();const t=document.getElementById("registerName").value,n=document.getElementById("registerPhone").value,o=document.getElementById("registerDob").value,a=document.getElementById("registerEmail").value,d=document.getElementById("registerAddress").value,i=document.getElementById("registerPassword").value,r=document.getElementById("registerMessage");if(demoUsers.some(e=>e.phone===n))return void(r.innerHTML='<p class="text-red-500">S·ªë ƒëi·ªán tho·∫°i ƒë√£ t·ªìn t·∫°i.</p>');const s={id:Date.now(),name:t,email:a,phone:n,password:i,dob:o,debt:0,creditLimit:2e5,address:d};demoUsers.push(s),r.innerHTML='<p class="text-green-500">ƒêƒÉng k√Ω th√†nh c√¥ng! ƒêang t·ª± ƒë·ªông ƒëƒÉng nh·∫≠p...</p>',setTimeout(()=>{loginUser(s),postLoginAction?(postLoginAction(),postLoginAction=null):showSection("intro")},1500)}

// <!-- B·∫ÆT ƒê·∫¶U CH·ªàNH S·ª¨A: C·∫≠p nh·∫≠t h√†m ƒëƒÉng k√Ω khi thanh to√°n ƒë·ªÉ l·∫•y ng√†y sinh -->
async function handleRegisterAndCheckout() {
    const name = document.getElementById("checkoutName").value;
    const phone = document.getElementById("checkoutPhone").value;
    const address = document.getElementById("checkoutAddress").value;
    const password = document.getElementById("checkoutPassword").value;
    const dob = document.getElementById("checkoutDob").value; // L·∫•y ng√†y sinh

    if (password.length < 6) {
        showNotification("M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±.", true);
        return false;
    }
    if (demoUsers.some(user => user.phone === phone)) {
        showNotification("S·ªë ƒëi·ªán tho·∫°i ƒë√£ t·ªìn t·∫°i. Vui l√≤ng ƒëƒÉng nh·∫≠p.", true);
        return false;
    }

    const newUser = {
        id: Date.now(),
        name,
        phone,
        address,
        password,
        email: "",
        dob: dob, // L∆∞u ng√†y sinh
        debt: 0,
        creditLimit: 200000
    };

    demoUsers.push(newUser);
    loginUser(newUser);
    showNotification(`ƒêƒÉng k√Ω th√†nh c√¥ng! Ch√†o m·ª´ng ${name}.`, false);
    return true;
}
// <!-- K·∫æT TH√öC CH·ªàNH S·ª¨A -->

function loginUser(e){currentUser=e,isLoggedIn=!0,localStorage.setItem("loggedInUserId",e.id),updateAllUI()}
function logout(){currentUser=null,isLoggedIn=!1,localStorage.removeItem("loggedInUserId"),updateAllUI(),showSection("intro"),showNotification("ƒê√£ ƒëƒÉng xu·∫•t!")}
function loadDashboard(){isLoggedIn?(showDashboardTab("overview",document.querySelector(".dashboard-menu-item")),loadDashboardOverview()):(postLoginAction=()=>showSection("dashboard"),showSection("login"))}
function showDashboardTab(e,t){document.querySelectorAll(".dashboard-content").forEach(e=>e.classList.add("hidden")),document.getElementById(e+"Tab").classList.remove("hidden"),document.querySelectorAll(".dashboard-menu-item").forEach(e=>e.classList.remove("active")),t.classList.add("active"),"overview"===e&&loadDashboardOverview(),"orders"===e&&loadOrders(),"debt"===e&&loadDebtInfo(),"profile"===e&&loadProfileInfo(),setupScrollAnimations()}
function calculateMonthlyStats(e){const t={};return e.forEach(e=>{const n=e.date.toISOString().slice(0,7);t[n]||(t[n]={orderCount:0,totalRevenue:0,totalItems:0}),t[n].orderCount++,t[n].totalRevenue+=e.total,e.items.forEach(e=>{t[n].totalItems+=e.quantity})}),t}
function renderOrderList(e,t){const n=document.getElementById(t);if(!n)return;const o=e.map(e=>`<div class="p-4 border-b last:border-0 flex justify-between items-center hover:bg-gray-50"><div><p class="font-semibold text-emerald-700">${e.code}</p><p class="text-sm text-gray-600">${e.date.toLocaleDateString("vi-VN")}</p></div><div class="text-right"><p class="font-bold">${e.total.toLocaleString()}ƒë</p><p class="text-sm ${"Ho√†n th√†nh"===e.status?"text-green-600":"text-orange-500"}">${e.status}</p></div><div class="ml-2 flex-shrink-0"><button onclick="showOrderDetail(${e.id})" class="text-sm bg-gray-200 px-3 py-1 rounded-md hover:bg-gray-300">Xem</button></div></div>`).join("");n.innerHTML=e.length>0?o:'<p class="p-4 text-center text-gray-500">Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng.</p>'}
function loadDashboardOverview(){const e=document.getElementById("overviewTab");if(!e)return;const t=orderHistory.filter(e=>e.customerId===currentUser.id).sort((e,t)=>t.date-e.date);e.innerHTML=`<h3 class="text-2xl font-bold mb-5">Ch√†o, ${currentUser.name}!</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"><div class="bg-white p-4 rounded-lg shadow-md text-center"><p class="text-sm text-gray-500">S·ªë ƒë∆°n h√†ng</p><p id="kpi-orders" class="text-2xl font-bold text-emerald-600">0</p></div><div class="bg-white p-4 rounded-lg shadow-md text-center"><p class="text-sm text-gray-500">T·ªïng chi ti√™u</p><p id="kpi-revenue" class="text-2xl font-bold text-emerald-600">0ƒë</p></div><div class="bg-white p-4 rounded-lg shadow-md text-center"><p class="text-sm text-gray-500">S·∫£n ph·∫©m ƒë√£ mua</p><p id="kpi-items" class="text-2xl font-bold text-emerald-600">0</p></div><div class="bg-white p-4 rounded-lg shadow-md text-center"><p class="text-sm text-gray-500">C√¥ng n·ª£</p><p id="kpi-debt" class="text-2xl font-bold text-red-600">0ƒë</p></div></div><div class="bg-white p-4 rounded-lg shadow-md mb-6"><div class="flex flex-col md:flex-row justify-between md:items-center mb-3"><h4 class="font-bold text-lg">Th·ªëng k√™ th√°ng</h4><select id="month-selector" class="mt-2 md:mt-0 border rounded-md p-1.5 text-sm"></select></div><div id="monthly-stats" class="grid grid-cols-3 gap-4 text-center"><div><p class="text-sm text-gray-500">Doanh s·ªë</p><p id="stat-revenue" class="font-bold text-lg">0ƒë</p></div><div><p class="text-sm text-gray-500">S·∫£n l∆∞·ª£ng</p><p id="stat-items" class="font-bold text-lg">0</p></div><div><p class="text-sm text-gray-500">ƒê∆°n h√†ng</p><p id="stat-orders" class="font-bold text-lg">0</p></div></div></div><div class="bg-white p-4 rounded-lg shadow-md"><div class="flex flex-col md:flex-row justify-between md:items-center mb-4"><h4 class="font-bold text-lg">ƒê∆°n h√†ng g·∫ßn nh·∫•t</h4><input type="text" id="order-search" placeholder="Tra c·ª©u m√£ ƒë∆°n, tr·∫°ng th√°i..." class="mt-2 md:mt-0 w-full md:w-64 border rounded-md p-1.5 text-sm"></div><div id="recent-orders-list" class="space-y-2"></div></div>`;const n=t.length,o=t.reduce((e,t)=>e+t.total,0),a=t.reduce((e,t)=>e+t.items.reduce((e,t)=>e+t.quantity,0),0);document.getElementById("kpi-orders").textContent=n,document.getElementById("kpi-revenue").textContent=`${o.toLocaleString()}ƒë`,document.getElementById("kpi-items").textContent=a,document.getElementById("kpi-debt").textContent=`${currentUser.debt.toLocaleString()}ƒë`;const d=calculateMonthlyStats(t),i=document.getElementById("month-selector");Object.keys(d).sort().reverse().forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=`Th√°ng ${e.slice(5,7)}/${e.slice(0,4)}`,i.appendChild(t)}),i.onchange=()=>{const e=d[i.value]||{totalRevenue:0,totalItems:0,orderCount:0};document.getElementById("stat-revenue").textContent=`${e.totalRevenue.toLocaleString()}ƒë`,document.getElementById("stat-items").textContent=e.totalItems,document.getElementById("stat-orders").textContent=e.orderCount},i.dispatchEvent(new Event("change"));const r=document.getElementById("order-search");r.onkeyup=()=>{const e=r.value.toLowerCase();renderOrderList(t.filter(t=>(t.code.toLowerCase().includes(e)||t.status.toLowerCase().includes(e)||t.items.some(t=>t.name.toLowerCase().includes(e)))),"recent-orders-list")},renderOrderList(t.slice(0,5),"recent-orders-list"),setupScrollAnimations()}
function loadOrders(){const e=document.getElementById("ordersTab");if(!e)return;let t=orderHistory.filter(e=>e.customerId===currentUser.id).sort((e,t)=>t.date-e.date);0===t.length&&(t=[demoCompletedOrder]);e.innerHTML=`<h3 class="text-2xl font-bold mb-5">L·ªãch s·ª≠ ƒë∆°n h√†ng</h3><div class="bg-white rounded-lg card-shadow overflow-hidden"><div class="divide-y divide-gray-200">${t.length>0?t.map(e=>`<div class="p-4 hover:bg-gray-50 flex justify-between items-center"><div><p class="font-semibold text-emerald-700">${e.code}</p><p class="text-sm text-gray-600">${e.date.toLocaleDateString("vi-VN")}</p></div><div class="text-right"><p class="font-bold">${e.total.toLocaleString()}ƒë</p><p class="text-sm ${"Ho√†n th√†nh"===e.status?"text-green-600":"text-orange-500"}">${e.status}</p></div><div class="ml-4 flex-shrink-0"><button onclick="showOrderDetail(${e.id})" class="text-sm bg-gray-200 px-3 py-1 rounded-md hover:bg-gray-300">Xem</button></div></div>`).join(""):`<p class="p-6 text-center text-gray-500">Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o.</p>`}</div></div>`,setupScrollAnimations()}
function showOrderDetail(e){const t=orderHistory.find(t=>t.id===e)||demoCompletedOrder;if(!t)return;const n=document.getElementById("orderDetailModal");n.innerHTML=TEMPLATES.orderDetailModal,document.getElementById("detailOrderCode").textContent=t.code,document.getElementById("detailOrderStatus").textContent=t.status,document.getElementById("detailOrderDate").textContent=t.date.toLocaleString("vi-VN",{dateStyle:"short",timeStyle:"short"}),document.getElementById("detailOrderCustomer").textContent=currentUser.name,document.getElementById("detailOrderShipper").textContent=t.shipper||"Ch∆∞a c√≥",document.getElementById("detailOrderTotal").textContent=t.total.toLocaleString()+"ƒë";const o=t.items.map(e=>`<div class="flex justify-between py-1"><p>${e.name} (x${e.quantity})</p><p>${(e.price*e.quantity).toLocaleString()}ƒë</p></div>`).join("");document.getElementById("detailOrderItems").innerHTML=o;const a=document.getElementById("order-actions");t.bill_image_url&&(a.innerHTML=`<a href="${t.bill_image_url}" target="_blank" class="block w-full text-center bg-blue-500 text-white py-2 rounded-lg font-semibold hover:bg-blue-600">Xem h√≥a ƒë∆°n</a>`);const d=document.getElementById("orderHistoryLog");t.history_log&&(d.innerHTML=t.history_log.map(e=>`<div class="relative"><div class="absolute -left-1.5 mt-1.5 w-3 h-3 bg-emerald-500 rounded-full"></div><div class="ml-4"><p class="font-semibold text-gray-800">${e.status}</p><p class="text-xs text-gray-500">${e.timestamp.toLocaleString("vi-VN",{dateStyle:"short",timeStyle:"short"})} - b·ªüi ${e.actor}</p></div></div>`).join(""));const i=document.getElementById("ratingSection");"Ho√†n th√†nh"===t.status?t.rating?i.innerHTML=`<h4 class="font-semibold text-lg mb-2">ƒê√°nh gi√° c·ªßa b·∫°n</h4><div class="flex items-center space-x-1 text-amber-500">${Array.from({length:5}).map((n,o)=>`<span>${o<t.rating.stars?"‚òÖ":"‚òÜ"}</span>`).join("")}</div><p class="mt-2 text-gray-700 italic">"${t.rating.comment}"</p>`:i.innerHTML=`<h4 class="font-semibold text-lg mb-2">ƒê√°nh gi√° ƒë∆°n h√†ng</h4><p class="text-sm text-gray-600 mb-4">S·ª± h√†i l√≤ng c·ªßa b·∫°n l√† ƒë·ªông l·ª±c c·ªßa ch√∫ng t√¥i!</p><div class="flex justify-center text-gray-300 space-x-2 mb-4 rating-stars">${[1,2,3,4,5].map(e=>`<span data-value="${e}">‚òÖ</span>`).join("")}</div><textarea id="ratingComment" class="w-full p-3 border rounded-lg bg-gray-50" rows="3" placeholder="Chia s·∫ª c·∫£m nh·∫≠n c·ªßa b·∫°n..."></textarea><div class="mt-4 flex justify-end"><button id="submitRatingBtn" class="px-6 py-2 bg-amber-500 text-white rounded-lg">G·ª≠i ƒë√°nh gi√°</button></div>`:i.innerHTML="",n.classList.remove("hidden");let r=0;const l=n.querySelectorAll(".rating-stars span");l.forEach(e=>{e.onclick=()=>{r=e.dataset.value,l.forEach(t=>t.style.color=t.dataset.value<=r?"#f59e0b":"#d1d5db")}});const s=n.querySelector("#submitRatingBtn");s&&(s.onclick=()=>{t&&(t.rating={stars:r,comment:document.getElementById("ratingComment").value},showNotification("C·∫£m ∆°n b·∫°n ƒë√£ ƒë√°nh gi√°!"),closeModal("orderDetailModal"),loadOrders())})}
function loadDebtInfo(){const e=document.getElementById("debtTab");e&&(e.innerHTML=`<h3 class="text-2xl font-bold mb-5">Quy·∫øt to√°n C√¥ng n·ª£</h3><div class="bg-white p-6 rounded-lg card-shadow text-center"><p class="text-lg text-gray-600">C√¥ng n·ª£ hi·ªán t·∫°i c·ªßa b·∫°n</p><p class="text-5xl font-bold text-red-600 my-4">${currentUser.debt.toLocaleString()}ƒë</p><p class="text-gray-500 mb-6">H·∫°n m·ª©c t√≠n d·ª•ng: ${currentUser.creditLimit.toLocaleString()}ƒë</p><button onclick="showDebtWarning(currentUser)" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-transform hover:scale-105">Thanh to√°n ngay</button></div>`)}
function loadProfileInfo(){const e=document.getElementById("profileTab");e&&(e.innerHTML=`<h3 class="text-2xl font-bold mb-5">Th√¥ng tin t√†i kho·∫£n</h3><div class="bg-white p-5 rounded-lg card-shadow"><form id="profileForm" class="space-y-4"><div><label class="font-medium text-sm text-gray-700">H·ªç v√† t√™n</label><input type="text" id="profileName" value="${currentUser.name}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50"></div><div><label class="font-medium text-sm text-gray-700">Ng√†y sinh</label><input type="date" id="profileDob" value="${currentUser.dob||""}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50"></div><div><label class="font-medium text-sm text-gray-700">S·ªë ƒëi·ªán tho·∫°i</label><input type="tel" id="profilePhone" value="${currentUser.phone}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-200" readonly></div><div><label class="font-medium text-sm text-gray-700">Email</label><input type="email" id="profileEmail" value="${currentUser.email||""}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50"></div><div><label class="font-medium text-sm text-gray-700">ƒê·ªãa ch·ªâ</label><input type="text" id="profileAddress" value="${currentUser.address}" class="w-full mt-1 px-4 py-2 border rounded-lg bg-gray-50"></div><div class="pt-4"><button type="submit" class="bg-emerald-600 text-white px-6 py-2.5 rounded-lg font-semibold transition-transform hover:scale-105">C·∫≠p nh·∫≠t</button></div></form></div>`,document.getElementById("profileForm").addEventListener("submit",e=>{e.preventDefault(),currentUser.name=document.getElementById("profileName").value,currentUser.dob=document.getElementById("profileDob").value,currentUser.email=document.getElementById("profileEmail").value,currentUser.address=document.getElementById("profileAddress").value;const t=demoUsers.find(e=>e.id===currentUser.id);t&&Object.assign(t,{name:currentUser.name,dob:currentUser.dob,email:currentUser.email,address:currentUser.address}),showNotification("C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!"),updateLoginUI()}))}
function handleFranchiseClick(){isLoggedIn?(showSection("dashboard"),showDashboardTab("franchise",document.querySelector('[onclick*="franchise"]'))):(postLoginAction=()=>showSection("dashboard"),showNotification("Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒëƒÉng k√Ω nh∆∞·ª£ng quy·ªÅn.",!0),showSection("login"))}
function showNotification(e,t=!1){const n=document.createElement("div");n.className=`fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white text-sm z-50 ${t?"bg-red-500":"bg-green-500"}`,n.textContent=e,document.body.appendChild(n),setTimeout(()=>n.remove(),4e3)}
function updateLoginUI(){document.getElementById("notLoggedIn").classList.toggle("hidden",isLoggedIn),document.getElementById("loggedIn").classList.toggle("hidden",!isLoggedIn),isLoggedIn&&(document.getElementById("userName").textContent=currentUser.name.split(" ").pop())}
function toggleUserDropdown(){document.getElementById("userDropdownMenu").classList.toggle("show")}
function closeUserDropdown(){document.getElementById("userDropdownMenu").classList.remove("show")}
function setupScrollAnimations(){const e=new IntersectionObserver((t,n)=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("is-visible"),n.unobserve(t.target))})},{rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".scroll-animate").forEach(t=>{e.observe(t)})}
document.addEventListener("DOMContentLoaded",()=>{initAnnouncements();const e=localStorage.getItem("loggedInUserId");if(e){const t=demoUsers.find(t=>t.id==e);t&&loginUser(t)}const t=window.innerWidth<768;showSection(t?"menu":"intro"),updateAllUI(),window.addEventListener("click",e=>{document.querySelector(".dropdown")?.contains(e.target)||closeUserDropdown()})});
const GITHUB_REPO_URL="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/",DEMO_IMAGE_URL="https://raw.githubusercontent.com/HienNguyenEMS/chacavungtau/refs/heads/main/cha-ca-vung-tau.jpg";
const products=[{id:1,name:"B√°nh m√¨ ch·∫£ c√° n√≥ng",price:2e4,salePrice:18e3,category:"banhmi",sold:215,image:GITHUB_REPO_URL+"banh-mi-cha-ca-nong.jpg"},{id:10,name:"B√°nh m√¨ que",price:15e3,salePrice:null,category:"banhmi",sold:180,image:GITHUB_REPO_URL+"banh-mi-que.jpg"},{id:2,name:"Ch·∫£ c√° t∆∞∆°i (kg)",price:12e4,salePrice:null,category:"chaca",sold:95,image:GITHUB_REPO_URL+"cha-ca-tuoi.jpg"},{id:6,name:"Ch·∫£ c√° Nha Trang (kg)",price:15e4,salePrice:135e3,category:"chaca",sold:120,image:GITHUB_REPO_URL+"cha-ca-nha-trang.jpg"},{id:7,name:"Ch·∫£ c√° s·ª£i (kg)",price:11e4,salePrice:null,category:"chaca",sold:80,image:GITHUB_REPO_URL+"cha-ca-soi.jpg"},{id:11,name:"Ch·∫£ c√° vi√™n",price:1e4,salePrice:null,category:"chaca",sold:350,image:GITHUB_REPO_URL+"cha-ca-vien.jpg"},{id:3,name:"B√°nh m√¨ nem n∆∞·ªõng",price:25e3,salePrice:null,category:"banhmi",sold:150,image:GITHUB_REPO_URL+"banh-mi-nem-nuong.png"},{id:4,name:"X√¥i ch·∫£ c√° ƒë·∫∑c bi·ªát",price:3e4,salePrice:25e3,category:"combo",sold:90,image:GITHUB_REPO_URL+"xoi-cha-ca-dac-biet.jpg"},{id:5,name:"Combo gia ƒë√¨nh 4 ng∆∞·ªùi",price:15e4,salePrice:null,category:"combo",sold:45,image:GITHUB_REPO_URL+"combo-gia-dinh.jpg"},{id:8,name:"N∆∞·ªõc m·∫Øm",price:15e3,salePrice:null,category:"phukien",sold:200,image:GITHUB_REPO_URL+"nuoc-mam.jpg"},{id:9,name:"KhƒÉn l·∫°nh",price:2e3,salePrice:null,category:"phukien",sold:500,image:GITHUB_REPO_URL+"khan.jpg"},{id:12,name:"Bao b√¨ Cam",price:1e3,salePrice:null,category:"phukien",sold:100,image:GITHUB_REPO_URL+"bao-bi-cam.jpg"},{id:13,name:"Bao b√¨ Xanh",price:1e3,salePrice:null,category:"phukien",sold:150,image:GITHUB_REPO_URL+"bao-bi-xanh.jpg"},{id:14,name:"Bao b√¨ X√°m",price:1e3,salePrice:null,category:"phukien",sold:120,image:GITHUB_REPO_URL+"bao-bi-xam.jpg"},{id:15,name:"Bao b√¨ ƒê·ªè",price:1e3,salePrice:null,category:"phukien",sold:130,image:GITHUB_REPO_URL+"bao-bi-do.jpg"}];
const branches=[{id:"q1",name:"Chi nh√°nh Qu·∫≠n 1",emoji:"üè¢",address:"123 ƒê∆∞·ªùng A, Qu·∫≠n 1, TPHCM",phone:"028.123.4567"},{id:"gv",name:"Chi nh√°nh G√≤ V·∫•p",emoji:"üè™",address:"456 ƒê∆∞·ªùng B, Qu·∫≠n G√≤ V·∫•p, TPHCM",phone:"028.234.5678"},{id:"bt",name:"Chi nh√°nh B√¨nh Th·∫°nh",emoji:"üèòÔ∏è",address:"789 ƒê∆∞·ªùng C, Qu·∫≠n B√¨nh Th·∫°nh, TPHCM",phone:"028.456.7890"}];
</script>
</html>
